{"version":3,"file":"index.es.js","sources":["../../node_modules/style-inject/dist/style-inject.es.js","../src/utils/emoji-utils.js","../src/utils/input-event-utils.js","../../node_modules/string-replace-to-array/string-replace-to-array.js","../../node_modules/react-easy-emoji/lib/replaceEmoji.js","../../node_modules/react-easy-emoji/lib/makeTwemojiRenderer.js","../../node_modules/react-easy-emoji/index.js","../src/hooks/use-sanitize.js","../src/hooks/use-expose.js","../src/hooks/use-emit.js","../src/text-input.js","../src/components/emoji-picker-button.js","../../node_modules/@emoji-mart/react/dist/module.js","../src/components/emoji-picker.js","../src/components/emoji-picker-container.js","../src/components/emoji-picker-wrapper.js","../src/utils/mention-utils.js","../src/hooks/use-mention.js","../src/components/mention-user-list.js","../src/components/mention-wrapper.js","../src/utils/observer.js","../src/hooks/use-event-listeners.js","../src/hooks/user-pollute.js","../src/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","/* eslint-disable valid-jsdoc */\r\n// @ts-check\r\n\r\nexport const TRANSPARENT_GIF =\r\n  \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\r\n\r\nexport const EMOJI_STYLE = \"\";\r\n\r\n/**\r\n * Replace all text with emoji with an image html tag\r\n * @param {string} text\r\n * @return {string}\r\n */\r\nexport function replaceAllTextEmojis(text) {\r\n  let allEmojis = getAllEmojisFromText(text);\r\n\r\n  if (allEmojis) {\r\n    allEmojis = [...new Set(allEmojis)]; // remove duplicates\r\n\r\n    allEmojis.forEach(emoji => {\r\n      text = replaceAll(text, emoji, getInputEmojiHTML('', emoji));\r\n    });\r\n  }\r\n\r\n  return text;\r\n}\r\n\r\n/**\r\n * Replace all occurrencies in a string\r\n * @param {string} str\r\n * @param {string} find\r\n * @param {string} replace\r\n * @return {string}\r\n */\r\nfunction replaceAll(str, find, replace) {\r\n  return str.replace(new RegExp(find, \"g\"), replace);\r\n}\r\n\r\n/**\r\n * Get all emojis from the text\r\n * @param {string} text\r\n * @return {string[]}\r\n */\r\nfunction getAllEmojisFromText(text) {\r\n  return text.match(\r\n    /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?)*/g\r\n  );\r\n}\r\n\r\n// eslint-disable-next-line valid-jsdoc\r\n/**\r\n *\r\n * @param { import(\"../types/types\").EmojiMartItem } emoji\r\n * @return {string}\r\n */\r\nexport function getImageEmoji(emoji) {\r\n  /** @type {HTMLElement | null} */\r\n  const emojiPickerEl = document.querySelector('em-emoji-picker')\r\n\r\n  if (!emojiPickerEl) {\r\n    return getInputEmojiNativeHTML(emoji.native)\r\n  }\r\n\r\n  /** @type {HTMLSpanElement | null=} */\r\n  const emojiSpanEl = emojiPickerEl?.shadowRoot?.querySelector(`[title=\"${emoji.name}\"] > span > span`)\r\n\r\n  if (!emojiSpanEl) {\r\n    return getInputEmojiNativeHTML(emoji.native)\r\n  }\r\n\r\n  const style = replaceAll(emojiSpanEl.style.cssText, '\"', \"'\");\r\n\r\n  return getInputEmojiHTML(style, emoji.native);\r\n}\r\n\r\n// eslint-disable-next-line valid-jsdoc\r\n/**\r\n *\r\n * @param {string} style\r\n * @param {string} emoji\r\n * @returns\r\n */\r\nfunction getInputEmojiHTML(style, emoji) {\r\n  return `<img style=\"${style}; display: inline-block\" data-emoji=\"${emoji}\" src=\"${TRANSPARENT_GIF}\" />`;\r\n}\r\n\r\n/**\r\n * \r\n * @param {string} emoji \r\n * @returns \r\n */\r\nfunction getInputEmojiNativeHTML(emoji) {\r\n  return `<span class=\"width: 18px; height: 18px; display: inline-block; margin: 0 1px;\">${emoji}</span>`;\r\n}\r\n\r\n/**\r\n *\r\n * @param {string} html\r\n * @return {string}\r\n */\r\nexport function replaceAllTextEmojiToString(html) {\r\n  const container = document.createElement(\"div\");\r\n  container.innerHTML = html;\r\n\r\n  const images = Array.prototype.slice.call(container.querySelectorAll(\"img\"));\r\n\r\n  images.forEach(image => {\r\n    container.innerHTML = container.innerHTML.replace(\r\n      image.outerHTML,\r\n      image.dataset.emoji\r\n    );\r\n  });\r\n\r\n  return container.innerHTML;\r\n}\r\n","// @ts-check\r\n\r\nimport {\r\n  getImageEmoji,\r\n  replaceAllTextEmojis,\r\n  replaceAllTextEmojiToString,\r\n} from \"./emoji-utils\";\r\n\r\n/**\r\n * Handle copy of current selected text\r\n * @param {React.ClipboardEvent} event\r\n */\r\nexport function handleCopy(event) {\r\n  const selectedText = window.getSelection();\r\n\r\n  if (selectedText === null) {\r\n    return;\r\n  }\r\n\r\n  let container = document.createElement(\"div\");\r\n\r\n  for (let i = 0, len = selectedText.rangeCount; i < len; ++i) {\r\n    container.appendChild(selectedText.getRangeAt(i).cloneContents());\r\n  }\r\n\r\n  container = replaceEmojiToString(container);\r\n\r\n  event.clipboardData.setData(\"text\", container.innerText);\r\n  event.preventDefault();\r\n}\r\n\r\n/**\r\n *\r\n * @param {string} html\r\n */\r\nexport function handlePasteHtmlAtCaret(html) {\r\n  let sel;\r\n  let range;\r\n  if (window.getSelection) {\r\n    // IE9 and non-IE\r\n    sel = window.getSelection();\r\n\r\n    if (sel === null) return;\r\n\r\n    if (sel.getRangeAt && sel.rangeCount) {\r\n      range = sel.getRangeAt(0);\r\n      range.deleteContents();\r\n\r\n      // Range.createContextualFragment() would be useful here but is\r\n      // non-standard and not supported in all browsers (IE9, for one)\r\n      const el = document.createElement(\"div\");\r\n      el.innerHTML = html;\r\n      const frag = document.createDocumentFragment();\r\n      let node;\r\n      let lastNode;\r\n      while ((node = el.firstChild)) {\r\n        lastNode = frag.appendChild(node);\r\n      }\r\n      range.insertNode(frag);\r\n\r\n      // Preserve the selection\r\n      if (lastNode) {\r\n        range = range.cloneRange();\r\n        range.setStartAfter(lastNode);\r\n        range.collapse(true);\r\n        sel.removeAllRanges();\r\n        sel.addRange(range);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Replace emoji img to its string value\r\n * @param {HTMLDivElement} container\r\n * @return {HTMLDivElement}\r\n */\r\nfunction replaceEmojiToString(container) {\r\n  const images = Array.prototype.slice.call(container.querySelectorAll(\"img\"));\r\n\r\n  images.forEach((image) => {\r\n    image.outerHTML = image.dataset.emoji;\r\n  });\r\n\r\n  return container;\r\n}\r\n\r\n/**\r\n * Handle past on input\r\n * @param {React.ClipboardEvent} event\r\n */\r\nexport function handlePaste(event) {\r\n  event.preventDefault();\r\n  let content;\r\n  if (event.clipboardData) {\r\n    content = event.clipboardData.getData(\"text/plain\");\r\n    content = replaceAllTextEmojis(content);\r\n    document.execCommand(\"insertHTML\", false, content);\r\n  }\r\n}\r\n\r\n/**\r\n * @typedef {object} HandleKeyDownOptions\r\n * @property {HTMLDivElement} placeholderEl\r\n * @property {number} maxLength\r\n * @property {HTMLDivElement} inputEl\r\n * @property {React.MutableRefObject<string>} cleanedTextRef\r\n * @property {React.MutableRefObject<HTMLDivElement>} textInputRef\r\n * @property {boolean} cleanOnEnter\r\n * @property {function(): void} emitChange\r\n * @property {(function(string): void)=} onEnter\r\n * @property {(function(KeyboardEvent): void)=} onKeyDown\r\n * @property {(function(string): void)} updateHTML\r\n */\r\n\r\n// eslint-disable-next-line valid-jsdoc\r\n/**\r\n * @typedef {Object} HandleSelectEmojiProps\r\n * @property {import(\"../types/types\").EmojiMartItem} emoji\r\n * @property {React.MutableRefObject<import('../text-input').Ref>} textInputRef\r\n * @property {boolean} keepOpened\r\n * @property {() => void} toggleShowPicker\r\n * @property {number=} maxLength\r\n */\r\n\r\n/**\r\n *\r\n * @param {HandleSelectEmojiProps} props\r\n */\r\nexport function handleSelectEmoji({\r\n  emoji,\r\n  textInputRef,\r\n  keepOpened,\r\n  toggleShowPicker,\r\n  maxLength,\r\n}) {\r\n  if (\r\n    typeof maxLength !== \"undefined\" &&\r\n    totalCharacters(textInputRef.current) >= maxLength\r\n  ) {\r\n    return;\r\n  }\r\n\r\n  textInputRef.current.appendContent(getImageEmoji(emoji));\r\n\r\n  if (!keepOpened) {\r\n    toggleShowPicker();\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * @param {{text: string, html: string}} props\r\n * @return {number}\r\n */\r\nexport function totalCharacters({ text, html }) {\r\n  const textCount = text.length;\r\n  const emojisCount = (html.match(/<img/g) || []).length;\r\n\r\n  return textCount + emojisCount;\r\n}\r\n\r\n// eslint-disable-next-line valid-jsdoc\r\n/**\r\n * Handle keyup event\r\n * @param {() => void} emitChange\r\n * @param {(event: KeyboardEvent) => void} onKeyDownMention\r\n * @param {React.MutableRefObject<string>} cleanedTextRef\r\n * @param {React.MutableRefObject<HTMLDivElement>} textInputRef\r\n * @return {(event: KeyboardEvent) => void}\r\n */\r\nexport function handleKeyup(\r\n  emitChange,\r\n  onKeyDownMention,\r\n  cleanedTextRef,\r\n  textInputRef,\r\n) {\r\n  return (event) => {\r\n    const text = replaceAllTextEmojiToString(textInputRef.current.innerHTML);\r\n    cleanedTextRef.current = text;\r\n    emitChange();\r\n    onKeyDownMention(event);\r\n  };\r\n}\r\n\r\n/**\r\n * Handle focus event\r\n * @param {function(FocusEvent): void} onFocus\r\n * @return {function(FocusEvent): void}\r\n */\r\nexport function handleFocus(onFocus) {\r\n  return (event) => {\r\n    onFocus(event);\r\n  };\r\n}\r\n\r\n/**\r\n * Set caret to the end of text value\r\n * @param {React.MutableRefObject<HTMLDivElement| null>} input\r\n */\r\nexport function moveCaretToEnd(input) {\r\n  let range;\r\n  let selection;\r\n  if (document.createRange && input.current) {\r\n    range = document.createRange();\r\n    range.selectNodeContents(input.current);\r\n    range.collapse(false);\r\n    selection = window.getSelection();\r\n    if (selection) {\r\n      selection.removeAllRanges();\r\n      selection.addRange(range);\r\n    }\r\n  }\r\n}\r\n/**\r\n *\r\n * @param {HTMLDivElement} inputDiv\r\n * @return {string}\r\n */\r\nexport function removeHtmlExceptBr(inputDiv) {\r\n  const temp = inputDiv.innerHTML.replaceAll(/<br\\s*\\/?>/gi, \"[BR]\"); // temporarily replace <br> with placeholder\r\n  const tempContainer = document.createElement(\"div\");\r\n  tempContainer.innerHTML = temp;\r\n  const stripped = tempContainer.innerText; // strip all html tags\r\n  const final = stripped.replaceAll(/\\[BR\\]/gi, \"</br>\"); // replace placeholders with <br>\r\n  return final;\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} range \r\n * @returns \r\n */\r\nexport function getSelectionStart(range) {\r\n  let node = range.startContainer;\r\n  let offset = range.startOffset;\r\n\r\n  // Handle cases where the selection start node is not a text node\r\n  if (node.nodeType !== Node.TEXT_NODE) {\r\n    while (node.nodeType !== Node.TEXT_NODE) {\r\n      node = node.nextSibling;\r\n      if (!node) break;\r\n    }\r\n    if (!node) {\r\n      node = range.commonAncestorContainer;\r\n      while (node.nodeType !== Node.TEXT_NODE) {\r\n        node = node.firstChild;\r\n      }\r\n    }\r\n    offset = 0;\r\n  }\r\n\r\n  return { node, offset };\r\n}\r\n\r\n/**\r\n * \r\n * @return {Object} cursor\r\n */\r\nexport function getCursor() {\r\n  const selection = window.getSelection();\r\n  const range = selection.getRangeAt(0);\r\n  const selectionStart = getSelectionStart(range);\r\n\r\n  return  {selection, range, selectionStart}\r\n}\r\n\r\n/**\r\n *\r\n */\r\nexport function addLineBreak() {\r\n  const { selection, range, selectionStart } = getCursor()\r\n\r\n  // If cursor is at the end of the text content, add one more line break\r\n  if (\r\n    selection.isCollapsed &&\r\n    selectionStart.offset === selectionStart.node.textContent.length\r\n  ) {\r\n    const br = document.createElement(\"br\");\r\n    range.insertNode(br);\r\n    range.setStartAfter(br);\r\n    range.setEndAfter(br);\r\n    selection.removeAllRanges();\r\n    selection.addRange(range);\r\n\r\n    const br2 = document.createElement(\"br\");\r\n    range.insertNode(br2);\r\n    range.setStartAfter(br2);\r\n    range.setEndAfter(br2);\r\n    selection.removeAllRanges();\r\n    selection.addRange(range);\r\n  } else {\r\n    const br = document.createElement(\"br\");\r\n    range.insertNode(br);\r\n    range.setStartAfter(br);\r\n    range.setEndAfter(br);\r\n    selection.removeAllRanges();\r\n    selection.addRange(range);\r\n    // Set cursor position right before the first letter after the line break\r\n    if (\r\n      selectionStart.node.nextSibling &&\r\n      selectionStart.node.nextSibling.nodeType === Node.TEXT_NODE\r\n    ) {\r\n      range.setStart(selectionStart.node.nextSibling, 1);\r\n      range.setEnd(selectionStart.node.nextSibling, 1);\r\n    }\r\n    selection.removeAllRanges();\r\n    selection.addRange(range);\r\n  }\r\n}\r\n","// Inspiration: https://github.com/facebook/react/issues/3386\n\nfunction replace (string, regexpOrSubstr, newValueOrFn, globalOffset) {\n\tif (typeof string !== 'string') throw new Error('First param must be a string')\n\tif (typeof regexpOrSubstr !== 'string' && !(regexpOrSubstr instanceof RegExp)) throw new Error('Second param must be a string pattern or a regular expression')\n\n\tvar fn = (typeof regexpOrSubstr === 'string') ? replaceUsingString : replaceUsingRegexp\n\n\treturn fn(string, regexpOrSubstr, newValueOrFn, globalOffset)\n}\n\nfunction replaceUsingString (string, patternString, newValueOrFn, globalOffset) {\n\tvar index = string.indexOf(patternString)\n\n\tif (index >= 0) {\n\t\tvar arr = []\n\t\tvar endIndex = index + patternString.length\n\n\t\tif (index > 0) {\n\t\t\tarr.push(string.substring(0, index))\n\t\t}\n\n\t\tarr.push(\n\t\t\t(typeof newValueOrFn === 'function') ?\n\t\t\t\tnewValueOrFn(\n\t\t\t\t\tstring.substring(index, endIndex),\n\t\t\t\t\tindex + globalOffset,\n\t\t\t\t\tstring\n\t\t\t\t) :\n\t\t\t\tnewValueOrFn\n\t\t)\n\n\t\tif (endIndex < string.length) {\n\t\t\tarr.push(string.substring(endIndex))\n\t\t}\n\n\t\treturn arr\n\t} else {\n\t\treturn [string]\n\t}\n}\n\nfunction replaceUsingRegexp (string, regexp, newValueOrFn, globalOffset) {\n\tvar output = []\n\n\tvar replacerIsFn = (typeof newValueOrFn === 'function')\n\n\tvar storedLastIndex = regexp.lastIndex\n\tregexp.lastIndex = 0\n\n\tvar result\n\tvar lastIndex = 0\n\twhile (result = regexp.exec(string)) {\n\t\tvar index = result.index\n\n\t\tif (result[0] === '') {\n\t\t\t// When the regexp is an empty string\n\t\t\t// we still want to advance our cursor to the next item.\n\t\t\t// This is the behavior of String.replace.\n\t\t\tregexp.lastIndex++\n\t\t}\n\n\t\tif (index !== lastIndex) {\n\t\t\toutput.push(string.substring(lastIndex, index))\n\t\t}\n\n\t\tvar match = result[0]\n\t\tlastIndex = index + match.length\n\t\t\n\t\tvar out = replacerIsFn ?\n\t\t\tnewValueOrFn.apply(this, result.concat(index + globalOffset, result.input)) :\n\t\t\tnewValueOrFn\n\t\toutput.push(out)\n\n\t\tif (!regexp.global) {\n\t\t\tbreak\n\t\t}\n\t}\n\n\tif (lastIndex < string.length) {\n\t\toutput.push(string.substring(lastIndex))\n\t}\n\n\tregexp.lastIndex = storedLastIndex\n\treturn output\n}\n\nmodule.exports = function stringReplaceToArray (stringOrArray, regexpOrSubstr, newSubStrOrFn) {\n\tif (typeof stringOrArray === 'string') {\n\t\treturn replace(stringOrArray, regexpOrSubstr, newSubStrOrFn, 0)\n\t} else if (!Array.isArray(stringOrArray) || !stringOrArray[0]) {\n\t\tthrow new TypeError('First argument must be an array or non-empty string')\n\t} else {\n\t\tvar len = stringOrArray.length\n\t\tvar output = []\n\t\tvar globalOffset = 0\n\t\tfor (var i = 0; i < len; ++i) {\n\t\t\tvar arrayItem = stringOrArray[i]\n\t\t\tif (typeof arrayItem === 'string') {\n\t\t\t\toutput.push.apply(output, replace(arrayItem, regexpOrSubstr, newSubStrOrFn, globalOffset))\n\t\t\t\tglobalOffset += arrayItem.length\n\t\t\t} else {\n\t\t\t\toutput.push(arrayItem)\n\t\t\t}\n\t\t}\n\t\treturn output\n\t}\n}","var replaceStringToArray = require('string-replace-to-array')\n\n// This is based off of https://github.com/twitter/twemoji/blob/gh-pages/2/twemoji.js\n//\n// Ideally we'd use twemoji instead of replicating its logic.\n// The reason we can't is that we need to run our own replace.\n//\n// We could use it for most things (by essentially running twemoji.parse for each\n// regex match, and reading the code from the callback), but the one thing we'd always need\n// to copy and paste into this file is the regex since we need it to run the replace.\n//\n// Another option is to fork twemoji and expose a method in it that could help us, then\n// ask them to pull it in.\n//\n\n// RegExp based on emoji's official Unicode standards\n// http://www.unicode.org/Public/UNIDATA/EmojiSources.txt\nvar re = /(?:\\ud83d\\udc68\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffc-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc68\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udffe]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffc-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffe]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68|\\ud83d\\udc69\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d[\\udc68\\udc69]|\\ud83e\\udef1\\ud83c\\udffb\\u200d\\ud83e\\udef2\\ud83c[\\udffc-\\udfff]|\\ud83e\\udef1\\ud83c\\udffc\\u200d\\ud83e\\udef2\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83e\\udef1\\ud83c\\udffd\\u200d\\ud83e\\udef2\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83e\\udef1\\ud83c\\udffe\\u200d\\ud83e\\udef2\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83e\\udef1\\ud83c\\udfff\\u200d\\ud83e\\udef2\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc68\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68|\\ud83d\\udc69\\u200d\\u2764\\ufe0f\\u200d\\ud83d[\\udc68\\udc69]|\\ud83e\\uddd1\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1|\\ud83d\\udc6b\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc6c\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc6d\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc8f\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc91\\ud83c[\\udffb-\\udfff]|\\ud83e\\udd1d\\ud83c[\\udffb-\\udfff]|\\ud83d[\\udc6b-\\udc6d\\udc8f\\udc91]|\\ud83e\\udd1d)|(?:\\ud83d[\\udc68\\udc69]|\\ud83e\\uddd1)(?:\\ud83c[\\udffb-\\udfff])?\\u200d(?:\\u2695\\ufe0f|\\u2696\\ufe0f|\\u2708\\ufe0f|\\ud83c[\\udf3e\\udf73\\udf7c\\udf84\\udf93\\udfa4\\udfa8\\udfeb\\udfed]|\\ud83d[\\udcbb\\udcbc\\udd27\\udd2c\\ude80\\ude92]|\\ud83e[\\uddaf-\\uddb3\\uddbc\\uddbd])|(?:\\ud83c[\\udfcb\\udfcc]|\\ud83d[\\udd74\\udd75]|\\u26f9)((?:\\ud83c[\\udffb-\\udfff]|\\ufe0f)\\u200d[\\u2640\\u2642]\\ufe0f)|(?:\\ud83c[\\udfc3\\udfc4\\udfca]|\\ud83d[\\udc6e\\udc70\\udc71\\udc73\\udc77\\udc81\\udc82\\udc86\\udc87\\ude45-\\ude47\\ude4b\\ude4d\\ude4e\\udea3\\udeb4-\\udeb6]|\\ud83e[\\udd26\\udd35\\udd37-\\udd39\\udd3d\\udd3e\\uddb8\\uddb9\\uddcd-\\uddcf\\uddd4\\uddd6-\\udddd])(?:\\ud83c[\\udffb-\\udfff])?\\u200d[\\u2640\\u2642]\\ufe0f|(?:\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83c\\udff3\\ufe0f\\u200d\\u26a7\\ufe0f|\\ud83c\\udff3\\ufe0f\\u200d\\ud83c\\udf08|\\ud83d\\ude36\\u200d\\ud83c\\udf2b\\ufe0f|\\u2764\\ufe0f\\u200d\\ud83d\\udd25|\\u2764\\ufe0f\\u200d\\ud83e\\ude79|\\ud83c\\udff4\\u200d\\u2620\\ufe0f|\\ud83d\\udc15\\u200d\\ud83e\\uddba|\\ud83d\\udc3b\\u200d\\u2744\\ufe0f|\\ud83d\\udc41\\u200d\\ud83d\\udde8|\\ud83d\\udc68\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc6f\\u200d\\u2640\\ufe0f|\\ud83d\\udc6f\\u200d\\u2642\\ufe0f|\\ud83d\\ude2e\\u200d\\ud83d\\udca8|\\ud83d\\ude35\\u200d\\ud83d\\udcab|\\ud83e\\udd3c\\u200d\\u2640\\ufe0f|\\ud83e\\udd3c\\u200d\\u2642\\ufe0f|\\ud83e\\uddde\\u200d\\u2640\\ufe0f|\\ud83e\\uddde\\u200d\\u2642\\ufe0f|\\ud83e\\udddf\\u200d\\u2640\\ufe0f|\\ud83e\\udddf\\u200d\\u2642\\ufe0f|\\ud83d\\udc08\\u200d\\u2b1b)|[#*0-9]\\ufe0f?\\u20e3|(?:[©®\\u2122\\u265f]\\ufe0f)|(?:\\ud83c[\\udc04\\udd70\\udd71\\udd7e\\udd7f\\ude02\\ude1a\\ude2f\\ude37\\udf21\\udf24-\\udf2c\\udf36\\udf7d\\udf96\\udf97\\udf99-\\udf9b\\udf9e\\udf9f\\udfcd\\udfce\\udfd4-\\udfdf\\udff3\\udff5\\udff7]|\\ud83d[\\udc3f\\udc41\\udcfd\\udd49\\udd4a\\udd6f\\udd70\\udd73\\udd76-\\udd79\\udd87\\udd8a-\\udd8d\\udda5\\udda8\\uddb1\\uddb2\\uddbc\\uddc2-\\uddc4\\uddd1-\\uddd3\\udddc-\\uddde\\udde1\\udde3\\udde8\\uddef\\uddf3\\uddfa\\udecb\\udecd-\\udecf\\udee0-\\udee5\\udee9\\udef0\\udef3]|[\\u203c\\u2049\\u2139\\u2194-\\u2199\\u21a9\\u21aa\\u231a\\u231b\\u2328\\u23cf\\u23ed-\\u23ef\\u23f1\\u23f2\\u23f8-\\u23fa\\u24c2\\u25aa\\u25ab\\u25b6\\u25c0\\u25fb-\\u25fe\\u2600-\\u2604\\u260e\\u2611\\u2614\\u2615\\u2618\\u2620\\u2622\\u2623\\u2626\\u262a\\u262e\\u262f\\u2638-\\u263a\\u2640\\u2642\\u2648-\\u2653\\u2660\\u2663\\u2665\\u2666\\u2668\\u267b\\u267f\\u2692-\\u2697\\u2699\\u269b\\u269c\\u26a0\\u26a1\\u26a7\\u26aa\\u26ab\\u26b0\\u26b1\\u26bd\\u26be\\u26c4\\u26c5\\u26c8\\u26cf\\u26d1\\u26d3\\u26d4\\u26e9\\u26ea\\u26f0-\\u26f5\\u26f8\\u26fa\\u26fd\\u2702\\u2708\\u2709\\u270f\\u2712\\u2714\\u2716\\u271d\\u2721\\u2733\\u2734\\u2744\\u2747\\u2757\\u2763\\u2764\\u27a1\\u2934\\u2935\\u2b05-\\u2b07\\u2b1b\\u2b1c\\u2b50\\u2b55\\u3030\\u303d\\u3297\\u3299])(?:\\ufe0f|(?!\\ufe0e))|(?:(?:\\ud83c[\\udfcb\\udfcc]|\\ud83d[\\udd74\\udd75\\udd90]|[\\u261d\\u26f7\\u26f9\\u270c\\u270d])(?:\\ufe0f|(?!\\ufe0e))|(?:\\ud83c[\\udf85\\udfc2-\\udfc4\\udfc7\\udfca]|\\ud83d[\\udc42\\udc43\\udc46-\\udc50\\udc66-\\udc69\\udc6e\\udc70-\\udc78\\udc7c\\udc81-\\udc83\\udc85-\\udc87\\udcaa\\udd7a\\udd95\\udd96\\ude45-\\ude47\\ude4b-\\ude4f\\udea3\\udeb4-\\udeb6\\udec0\\udecc]|\\ud83e[\\udd0c\\udd0f\\udd18-\\udd1c\\udd1e\\udd1f\\udd26\\udd30-\\udd39\\udd3d\\udd3e\\udd77\\uddb5\\uddb6\\uddb8\\uddb9\\uddbb\\uddcd-\\uddcf\\uddd1-\\udddd\\udec3-\\udec5\\udef0-\\udef6]|[\\u270a\\u270b]))(?:\\ud83c[\\udffb-\\udfff])?|(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc65\\udb40\\udc6e\\udb40\\udc67\\udb40\\udc7f|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc73\\udb40\\udc63\\udb40\\udc74\\udb40\\udc7f|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc77\\udb40\\udc6c\\udb40\\udc73\\udb40\\udc7f|\\ud83c\\udde6\\ud83c[\\udde8-\\uddec\\uddee\\uddf1\\uddf2\\uddf4\\uddf6-\\uddfa\\uddfc\\uddfd\\uddff]|\\ud83c\\udde7\\ud83c[\\udde6\\udde7\\udde9-\\uddef\\uddf1-\\uddf4\\uddf6-\\uddf9\\uddfb\\uddfc\\uddfe\\uddff]|\\ud83c\\udde8\\ud83c[\\udde6\\udde8\\udde9\\uddeb-\\uddee\\uddf0-\\uddf5\\uddf7\\uddfa-\\uddff]|\\ud83c\\udde9\\ud83c[\\uddea\\uddec\\uddef\\uddf0\\uddf2\\uddf4\\uddff]|\\ud83c\\uddea\\ud83c[\\udde6\\udde8\\uddea\\uddec\\udded\\uddf7-\\uddfa]|\\ud83c\\uddeb\\ud83c[\\uddee-\\uddf0\\uddf2\\uddf4\\uddf7]|\\ud83c\\uddec\\ud83c[\\udde6\\udde7\\udde9-\\uddee\\uddf1-\\uddf3\\uddf5-\\uddfa\\uddfc\\uddfe]|\\ud83c\\udded\\ud83c[\\uddf0\\uddf2\\uddf3\\uddf7\\uddf9\\uddfa]|\\ud83c\\uddee\\ud83c[\\udde8-\\uddea\\uddf1-\\uddf4\\uddf6-\\uddf9]|\\ud83c\\uddef\\ud83c[\\uddea\\uddf2\\uddf4\\uddf5]|\\ud83c\\uddf0\\ud83c[\\uddea\\uddec-\\uddee\\uddf2\\uddf3\\uddf5\\uddf7\\uddfc\\uddfe\\uddff]|\\ud83c\\uddf1\\ud83c[\\udde6-\\udde8\\uddee\\uddf0\\uddf7-\\uddfb\\uddfe]|\\ud83c\\uddf2\\ud83c[\\udde6\\udde8-\\udded\\uddf0-\\uddff]|\\ud83c\\uddf3\\ud83c[\\udde6\\udde8\\uddea-\\uddec\\uddee\\uddf1\\uddf4\\uddf5\\uddf7\\uddfa\\uddff]|\\ud83c\\uddf4\\ud83c\\uddf2|\\ud83c\\uddf5\\ud83c[\\udde6\\uddea-\\udded\\uddf0-\\uddf3\\uddf7-\\uddf9\\uddfc\\uddfe]|\\ud83c\\uddf6\\ud83c\\udde6|\\ud83c\\uddf7\\ud83c[\\uddea\\uddf4\\uddf8\\uddfa\\uddfc]|\\ud83c\\uddf8\\ud83c[\\udde6-\\uddea\\uddec-\\uddf4\\uddf7-\\uddf9\\uddfb\\uddfd-\\uddff]|\\ud83c\\uddf9\\ud83c[\\udde6\\udde8\\udde9\\uddeb-\\udded\\uddef-\\uddf4\\uddf7\\uddf9\\uddfb\\uddfc\\uddff]|\\ud83c\\uddfa\\ud83c[\\udde6\\uddec\\uddf2\\uddf3\\uddf8\\uddfe\\uddff]|\\ud83c\\uddfb\\ud83c[\\udde6\\udde8\\uddea\\uddec\\uddee\\uddf3\\uddfa]|\\ud83c\\uddfc\\ud83c[\\uddeb\\uddf8]|\\ud83c\\uddfd\\ud83c\\uddf0|\\ud83c\\uddfe\\ud83c[\\uddea\\uddf9]|\\ud83c\\uddff\\ud83c[\\udde6\\uddf2\\uddfc]|\\ud83c[\\udccf\\udd8e\\udd91-\\udd9a\\udde6-\\uddff\\ude01\\ude32-\\ude36\\ude38-\\ude3a\\ude50\\ude51\\udf00-\\udf20\\udf2d-\\udf35\\udf37-\\udf7c\\udf7e-\\udf84\\udf86-\\udf93\\udfa0-\\udfc1\\udfc5\\udfc6\\udfc8\\udfc9\\udfcf-\\udfd3\\udfe0-\\udff0\\udff4\\udff8-\\udfff]|\\ud83d[\\udc00-\\udc3e\\udc40\\udc44\\udc45\\udc51-\\udc65\\udc6a\\udc6f\\udc79-\\udc7b\\udc7d-\\udc80\\udc84\\udc88-\\udc8e\\udc90\\udc92-\\udca9\\udcab-\\udcfc\\udcff-\\udd3d\\udd4b-\\udd4e\\udd50-\\udd67\\udda4\\uddfb-\\ude44\\ude48-\\ude4a\\ude80-\\udea2\\udea4-\\udeb3\\udeb7-\\udebf\\udec1-\\udec5\\uded0-\\uded2\\uded5-\\uded7\\udedd-\\udedf\\udeeb\\udeec\\udef4-\\udefc\\udfe0-\\udfeb\\udff0]|\\ud83e[\\udd0d\\udd0e\\udd10-\\udd17\\udd20-\\udd25\\udd27-\\udd2f\\udd3a\\udd3c\\udd3f-\\udd45\\udd47-\\udd76\\udd78-\\uddb4\\uddb7\\uddba\\uddbc-\\uddcc\\uddd0\\uddde-\\uddff\\ude70-\\ude74\\ude78-\\ude7c\\ude80-\\ude86\\ude90-\\udeac\\udeb0-\\udeba\\udec0-\\udec2\\uded0-\\uded9\\udee0-\\udee7]|[\\u23e9-\\u23ec\\u23f0\\u23f3\\u267e\\u26ce\\u2705\\u2728\\u274c\\u274e\\u2753-\\u2755\\u2795-\\u2797\\u27b0\\u27bf\\ue50a])|\\ufe0f/g\n\nfunction toCodePoint(unicodeSurrogates, sep) {\n    var\n\t\tr = [],\n\t\tc = 0,\n\t\tp = 0,\n\t\ti = 0\n\t\t\n\twhile (i < unicodeSurrogates.length) {\n\t\tc = unicodeSurrogates.charCodeAt(i++)\n\t\tif (p) {\n\t\t\tr.push((0x10000 + ((p - 0xD800) << 10) + (c - 0xDC00)).toString(16))\n\t\t\tp = 0\n\t\t} else if (0xD800 <= c && c <= 0xDBFF) {\n\t\t\tp = c\n\t\t} else {\n\t\t\tr.push(c.toString(16))\n\t\t}\n\t}\n\treturn r.join(sep || '-')\n}\n\n// avoid runtime RegExp creation for not so smart,\n// not JIT based, and old browsers / engines\nvar UFE0Fg = /\\uFE0F/g\n\n// avoid using a string literal like '\\u200D' here because minifiers expand it inline\nvar U200D = String.fromCharCode(0x200D)\n\n/**\n* Used to both remove the possible variant\n*  and to convert utf16 into code points.\n*  If there is a zero-width-joiner (U+200D), leave the variants in.\n* @param   string    the raw text of the emoji match\n*/\nfunction grabTheRightIcon(rawText) {\n\t// if variant is present as \\uFE0F\n\treturn toCodePoint(rawText.indexOf(U200D) < 0 ?\n\t\trawText.replace(UFE0Fg, '') :\n\t\trawText\n\t);\n}\n\nmodule.exports = function replaceEmoji (string, render) {\n\t// Note: the latest regex added an empty matching group, so we ignore it.\n\treturn replaceStringToArray(string, re, function emojiReplacer (match, _, offset) {\n\t\tvar icon = grabTheRightIcon(match)\n\t\treturn render(icon, match, offset)\n\t})\n}\n","var createElement = require('react').createElement\n\nvar pageProtocol = (typeof location === 'undefined') ? '' : ((location.protocol === 'https:') ? 'https:' : 'http:')\n\nvar emojiStyle = {\n\theight: '1em',\n\twidth: '1em',\n\tmargin: '0 .05em 0 .1em',\n\tverticalAlign: '-0.1em'\n}\n\n// Accept protocol with or without a colon\nfunction normalizeProtocol(protocol) {\n\tif (protocol && protocol.length > 0 && protocol.charAt(protocol.length - 1) !== ':') {\n\t\treturn protocol + ':'\n\t}\n\treturn protocol\n}\n\nmodule.exports = function makeTwemojiRenderer(options) {\n\toptions = merge({\n\t\tprotocol: pageProtocol,\n\t\tbaseUrl: '//cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/',\n\t\tsize: '72x72',\n\t\text: '.png',\n\t\tprops: null\n\t}, options)\n\n\treturn function renderTwemoji (icon, match, offset) {\n\t\tvar src = ''\n\t\tif (options.baseUrl.indexOf('http') !== 0) {\n\t\t\tsrc += normalizeProtocol(options.protocol)\n\t\t}\n\n\t\tsrc += options.baseUrl + options.size + '/' + icon + options.ext\n\n\t\treturn createElement(\n\t\t\t'img',\n\t\t\tmerge({\n\t\t\t\tkey: offset,\n\t\t\t\talt: match,\n\t\t\t\tdraggable: false,\n\t\t\t\tsrc: src,\n\t\t\t\tstyle: emojiStyle\n\t\t\t}, options.props)\n\t\t)\n\t}\n}\n\nfunction merge() {\n\tvar out = {}, len = arguments.length\n\tfor(var i = 0; i < len; ++i) {\n\t\tvar source = arguments[i]\n\t\tif (source) {\n\t\t\tfor (var key in source) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(source, key)) {\n\t\t\t\t\tout[key] = source[key]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n   }\n   return out\n}","var replaceEmoji = require('./lib/replaceEmoji'),\n\tmakeTwemojiRenderer = require('./lib/makeTwemojiRenderer')\n\nmodule.exports = function reactEasyEmoji (element, optionsOrFn) {\n\tvar render = (typeof optionsOrFn === 'function') ? optionsOrFn : makeTwemojiRenderer(optionsOrFn)\n\treturn replaceEmoji(element, render)\n}","// @ts-check\r\n\r\nimport { useCallback, useRef } from \"react\";\r\nimport { renderToString } from 'react-dom/server'\r\nimport emoji from 'react-easy-emoji'\r\nimport { removeHtmlExceptBr } from \"../utils/input-event-utils\";\r\n\r\nconst EMOJI_REGEX = new RegExp(\r\n  /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?)*/g\r\n)\r\n\r\n/**\r\n * @typedef {import('../types/types').SanitizeFn} SanitizeFn\r\n */\r\n\r\n// eslint-disable-next-line valid-jsdoc\r\n/**\r\n * @param {boolean} shouldReturn\r\n * @param {boolean} shouldConvertEmojiToImage\r\n */\r\nexport function useSanitize(shouldReturn, shouldConvertEmojiToImage) {\r\n  /** @type {React.MutableRefObject<SanitizeFn[]>} */\r\n  const sanitizeFnsRef = useRef([]);\r\n\r\n  const sanitizedTextRef = useRef(\"\");\r\n\r\n  /** @type {(fn: SanitizeFn) => void} */\r\n  const addSanitizeFn = useCallback(fn => {\r\n    sanitizeFnsRef.current.push(fn);\r\n  }, []);\r\n\r\n  /** @type {(html: string) => string} */\r\n  const sanitize = useCallback(html => {\r\n    let result = sanitizeFnsRef.current.reduce((acc, fn) => {\r\n      return fn(acc);\r\n    }, html);\r\n\r\n    result = replaceAllHtmlToString(result, shouldReturn);\r\n\r\n    if (shouldConvertEmojiToImage) {\r\n      result = convertEmojiToImage(result);\r\n    }\r\n\r\n    sanitizedTextRef.current = result;\r\n\r\n    return result;\r\n  }, [shouldReturn, shouldConvertEmojiToImage]);\r\n\r\n  return { addSanitizeFn, sanitize, sanitizedTextRef };\r\n}\r\n\r\n/**\r\n *\r\n * @param {string} html\r\n * @param {boolean} shouldReturn\r\n * @return {string}\r\n */\r\nexport function replaceAllHtmlToString(html, shouldReturn) {\r\n  const container = document.createElement(\"div\");\r\n  container.innerHTML = html;\r\n  let text\r\n  if(shouldReturn) {\r\n    text = removeHtmlExceptBr(container)\r\n  } else {\r\n    text = container.innerText || \"\";\r\n  }\r\n\r\n  // remove all ↵ for safari\r\n  text = text.replace(/\\n/gi, \"\");\r\n\r\n  return text;\r\n}\r\n\r\n/**\r\n * \r\n * @param {string} text \r\n * @return {string}\r\n */\r\nfunction convertEmojiToImage(text) {\r\n  text = handleEmoji(text)\r\n  text = renderToString(emoji(text))\r\n  text = text.replace(\r\n    new RegExp('&lt;span class=&quot;message-emoji&quot;&gt;', 'g'),\r\n    '<span class=\"message-emoji\">'\r\n  )\r\n  text = text.replace(new RegExp('&lt;/span&gt;', 'g'), '</span>')\r\n  \r\n  return text  \r\n}\r\n\r\n/**\r\n * \r\n * @param {string} text \r\n * @return {string}\r\n */\r\nfunction handleEmoji (text) {\r\n  return text.replace(EMOJI_REGEX, '<span class=\"message-emoji\">$&</span>')\r\n}\r\n","// @ts-check\r\n\r\nimport { useImperativeHandle } from \"react\";\r\nimport { useSanitize } from \"./use-sanitize\";\r\n\r\n/**\r\n * @typedef {Object} Props\r\n * @property {React.Ref<any>} ref\r\n * @property {React.MutableRefObject<import('../text-input').Ref | null>} textInputRef\r\n * @property {(value: string) => void} setValue\r\n * @property {() => void} emitChange\r\n * @property {boolean=} shouldConvertEmojiToImage\r\n */\r\n\r\n/**\r\n *\r\n * @param {Props} props\r\n */\r\nexport function useExpose({ ref, textInputRef, setValue, emitChange, shouldConvertEmojiToImage }) {\r\n  const { sanitize, sanitizedTextRef } = useSanitize(false, shouldConvertEmojiToImage);\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    get value() {\r\n      return sanitizedTextRef.current;\r\n    },\r\n    set value(value) {\r\n      setValue(value);\r\n    },\r\n    focus: () => {\r\n      if (textInputRef.current === null) return\r\n      textInputRef.current.focus();\r\n    },\r\n    blur: () => {\r\n      if (textInputRef.current !== null) {\r\n        sanitize(textInputRef.current.html);\r\n\r\n      }\r\n\r\n      emitChange();\r\n    }\r\n  }));\r\n}\r\n","// @ts-check\r\n\r\nimport { useCallback, useEffect, useRef } from \"react\";\r\n\r\n// eslint-disable-next-line valid-jsdoc\r\n/**\r\n * useEmit\r\n * @param {React.MutableRefObject<import('../text-input').Ref | null>} textInputRef\r\n * @param {(size: {width: number, height: number}) => void} onResize\r\n * @param {(text: string) => void} onChange\r\n */\r\nexport function useEmit(textInputRef, onResize, onChange) {\r\n  /** @type {React.MutableRefObject<{width: number; height: number} | null>} */\r\n  const currentSizeRef = useRef(null);\r\n  const onChangeFn = useRef(onChange);\r\n\r\n  const checkAndEmitResize = useCallback(() => {\r\n    if (textInputRef.current !== null) {\r\n      const currentSize = currentSizeRef.current;\r\n\r\n      const nextSize = textInputRef.current.size;\r\n\r\n      if (\r\n        (!currentSize ||\r\n          currentSize.width !== nextSize.width ||\r\n          currentSize.height !== nextSize.height) &&\r\n        typeof onResize === \"function\"\r\n      ) {\r\n        onResize(nextSize);\r\n      }\r\n\r\n      currentSizeRef.current = nextSize;\r\n    }\r\n  }, [onResize, textInputRef]);\r\n\r\n  const emitChange = useCallback((sanitizedText) => {\r\n    if (typeof onChangeFn.current === \"function\") {\r\n      onChangeFn.current(sanitizedText);\r\n    }\r\n\r\n    if (typeof onResize === \"function\") {\r\n      checkAndEmitResize();\r\n    }\r\n  }, [checkAndEmitResize, onResize]);\r\n\r\n  useEffect(() => {\r\n    if (textInputRef.current) {\r\n      checkAndEmitResize();\r\n    }\r\n  }, [checkAndEmitResize, textInputRef]);\r\n\r\n  return emitChange;\r\n}\r\n","// @ts-check\r\n// vendors\r\nimport React, { useImperativeHandle, forwardRef, useRef, useMemo } from \"react\";\r\nimport { addLineBreak, handlePasteHtmlAtCaret } from \"./utils/input-event-utils\";\r\nimport { replaceAllTextEmojiToString } from \"./utils/emoji-utils\";\r\n\r\n/**\r\n * @typedef {Object} Props\r\n * @property {(event: React.KeyboardEvent) => void} onKeyDown\r\n * @property {(event: React.KeyboardEvent) => void} onKeyUp\r\n * @property {() => void} onFocus\r\n * @property {() => void} onBlur\r\n * @property {(sanitizedText: string) => void=} onChange\r\n * @property {(event: React.KeyboardEvent) => void} onArrowUp\r\n * @property {(event: React.KeyboardEvent) => void} onArrowDown\r\n * @property {(event: React.KeyboardEvent) => void} onEnter\r\n * @property {boolean} shouldReturn\r\n * @property {(event: React.ClipboardEvent) => void} onCopy\r\n * @property {(event: React.ClipboardEvent) => void} onPaste\r\n * @property {string} placeholder\r\n * @property {{borderRadius?: number; color?: string; borderColor?: string; fontSize?: number; fontFamily?: string; background: string; placeholderColor?: string;}} style\r\n * @property {number} tabIndex\r\n * @property {string} className\r\n * @property {(html: string) => void} onChange\r\n */\r\n\r\n/**\r\n * @typedef {{\r\n *  appendContent: (html: string) => void;\r\n *  html: string;\r\n *  text: string;\r\n *  size: { width: number; height: number;};\r\n *  focus: () => void;\r\n * }} Ref\r\n */\r\n\r\n// eslint-disable-next-line valid-jsdoc\r\n/** @type {React.ForwardRefRenderFunction<Ref, Props>} */\r\nconst TextInput = (\r\n  { placeholder, style, tabIndex, className, onChange, ...props },\r\n  ref\r\n) => {\r\n  useImperativeHandle(ref, () => ({\r\n    appendContent: html => {\r\n      if (textInputRef.current) {\r\n        textInputRef.current.focus();\r\n      }\r\n\r\n      handlePasteHtmlAtCaret(html);\r\n\r\n      if (textInputRef.current) {\r\n        textInputRef.current.focus();\r\n      }\r\n\r\n      if (textInputRef.current && placeholderRef.current && replaceAllTextEmojiToString(textInputRef.current.innerHTML) === \"\") {\r\n        placeholderRef.current.style.visibility = \"visible\";\r\n      } else if (placeholderRef.current) {\r\n        placeholderRef.current.style.visibility = \"hidden\";\r\n      }\r\n\r\n      if (textInputRef.current && typeof onChange === 'function') {\r\n        onChange(textInputRef.current.innerHTML);\r\n      }\r\n    },\r\n    set html(value) {\r\n      if (textInputRef.current) {\r\n        textInputRef.current.innerHTML = value;\r\n      }\r\n      \r\n      if (placeholderRef.current) {\r\n        const text = replaceAllTextEmojiToString(value)\r\n        if (text === \"\") {\r\n          placeholderRef.current.style.visibility = \"visible\";\r\n        } else {\r\n          placeholderRef.current.style.visibility = \"hidden\";\r\n        }\r\n      }\r\n\r\n      if (typeof onChange === 'function' && textInputRef.current) {\r\n        onChange(textInputRef.current.innerHTML);\r\n      }\r\n    },\r\n    get html() {\r\n      if (!textInputRef.current) return ''\r\n\r\n      return textInputRef.current.innerHTML;\r\n    },\r\n    get text() {\r\n      if (!textInputRef.current) return ''\r\n\r\n      return textInputRef.current.innerText;\r\n    },\r\n    get size() {\r\n      if (!textInputRef.current) {\r\n        return {\r\n          width: 0,\r\n          height: 0\r\n        }\r\n      }\r\n\r\n      return {\r\n        width: textInputRef.current.offsetWidth,\r\n        height: textInputRef.current.offsetHeight\r\n      };\r\n    },\r\n    focus() {\r\n      if (!textInputRef.current) return\r\n\r\n      textInputRef.current.focus();\r\n    }\r\n  }));\r\n\r\n  /** @type {React.CSSProperties} */\r\n  const placeholderStyle = useMemo(() => {\r\n    const placeholderStyle = {}\r\n\r\n    if (style.placeholderColor) {\r\n      placeholderStyle.color = style.placeholderColor\r\n    }\r\n\r\n    return placeholderStyle\r\n  }, [style?.placeholderColor])\r\n\r\n  /** @type {React.CSSProperties} */\r\n  const inputStyle = useMemo(() => {\r\n    const inputStyle = {}\r\n\r\n    if (style.color) {\r\n      inputStyle.color = style.color\r\n    }\r\n\r\n    return inputStyle\r\n  }, [style?.color])\r\n\r\n  /** @type {React.MutableRefObject<HTMLDivElement | null>} */\r\n  const placeholderRef = useRef(null);\r\n  /** @type {React.MutableRefObject<HTMLDivElement | null>} */\r\n  const textInputRef = useRef(null);\r\n\r\n  /**\r\n   *\r\n   * @param {React.KeyboardEvent} event\r\n   */\r\n  function handleKeyDown(event) {    \r\n    if (event.key === \"Enter\" && (event.shiftKey === true || event.ctrlKey === true) && props.shouldReturn) {\r\n      event.preventDefault();\r\n      if(textInputRef.current) {\r\n        addLineBreak()\r\n        return;\r\n      }\r\n    } \r\n    if (event.key === \"Enter\") {\r\n      props.onEnter(event);\r\n    } else if (event.key === \"ArrowUp\") {\r\n      props.onArrowUp(event);\r\n    } else if (event.key === \"ArrowDown\") {\r\n      props.onArrowDown(event);\r\n    } else {\r\n      if (event.key.length === 1 && placeholderRef.current) {\r\n        placeholderRef.current.style.visibility = \"hidden\";\r\n      }\r\n    }\r\n\r\n    props.onKeyDown(event);\r\n  }\r\n\r\n  /** */\r\n  function handleClick() {\r\n    props.onFocus();\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {React.KeyboardEvent} event\r\n   */\r\n  function handleKeyUp(event) {\r\n    props.onKeyUp(event);\r\n\r\n    const input = textInputRef.current;\r\n\r\n    if (placeholderRef.current && input) {\r\n      const text = replaceAllTextEmojiToString(input.innerHTML)\r\n      if (text === \"\") {\r\n        placeholderRef.current.style.visibility = \"visible\";\r\n      } else {\r\n        placeholderRef.current.style.visibility = \"hidden\";\r\n      }\r\n    }\r\n\r\n    if (typeof onChange === 'function' && textInputRef.current) {\r\n      onChange(textInputRef.current.innerHTML);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"react-input-emoji--container\" style={style}>\r\n      <div className=\"react-input-emoji--wrapper\" onClick={handleClick}>\r\n        <div ref={placeholderRef} className=\"react-input-emoji--placeholder\" style={placeholderStyle}>\r\n          {placeholder}\r\n        </div>\r\n        <div\r\n          ref={textInputRef}\r\n          onKeyDown={handleKeyDown}\r\n          onKeyUp={handleKeyUp}\r\n          tabIndex={tabIndex}\r\n          contentEditable\r\n          className={`react-input-emoji--input${className ? ` ${className}` : \"\"\r\n            }`}\r\n          onBlur={props.onBlur}\r\n          onCopy={props.onCopy}\r\n          onPaste={props.onPaste}\r\n          data-testid=\"react-input-emoji--input\"\r\n          style={inputStyle}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst TextInputWithRef = forwardRef(TextInput);\r\n\r\nexport default TextInputWithRef;\r\n","// vendors\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\n\r\n/**\r\n * @typedef {object} Props\r\n * @property {boolean} showPicker\r\n * @property {(event: React.MouseEvent) => void} toggleShowPicker\r\n * @property {HTMLDivElement=} buttonElement\r\n * @property {React.MutableRefObject=} buttonRef\r\n */\r\n\r\n/**\r\n * Emoji Picker Button Component\r\n * @param {Props} props\r\n * @return {JSX.Element}\r\n */\r\nfunction EmojiPickerButton({ showPicker, toggleShowPicker, buttonElement, buttonRef }) {\r\n  const [typeButton, setTypeButton] = useState(/** @type {\"OWN\" | \"REF\" | \"CUSTOM_CONTENT\" | \"IDLE\"} */ \"IDLE\");\r\n  const localButtonRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!buttonRef && !buttonElement) {\r\n      setTypeButton(\"OWN\");\r\n      return;\r\n    }\r\n\r\n    if (buttonRef && buttonRef.current) {\r\n      buttonRef.current.addEventListener(\"click\", toggleShowPicker);\r\n      setTypeButton(\"REF\");\r\n      return () => {\r\n        if (!buttonRef.current) return;\r\n        return buttonRef.current.removeEventListener(\"click\", toggleShowPicker);\r\n      }\r\n    }\r\n    else if ((buttonElement?.childNodes?.length ?? 0) >= 2) {\r\n      localButtonRef.current.appendChild(buttonElement?.childNodes[0]);\r\n      setTypeButton(\"CUSTOM_CONTENT\");\r\n    }\r\n  }, [buttonRef, buttonElement, buttonElement?.childNodes, toggleShowPicker])\r\n\r\n  return ( typeButton !== \"IDLE\" && typeButton !== \"REF\" &&\r\n    <button\r\n      ref={localButtonRef}\r\n      type=\"button\"\r\n      className={`react-input-emoji--button${\r\n        showPicker ? \" react-input-emoji--button__show\" : \"\"\r\n      }`}\r\n      onClick={toggleShowPicker}\r\n    >\r\n      {typeButton === \"OWN\" && (\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          viewBox=\"0 0 24 24\"\r\n          width=\"24\"\r\n          height=\"24\"\r\n          className=\"react-input-emoji--button--icon\"\r\n        >\r\n          {/* eslint-disable-next-line max-len */}\r\n          <path d=\"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10\" />\r\n          {/* eslint-disable-next-line max-len */}\r\n          <path d=\"M8 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 8 7M16 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 16 7M15.232 15c-.693 1.195-1.87 2-3.349 2-1.477 0-2.655-.805-3.347-2H15m3-2H6a6 6 0 1 0 12 0\" />\r\n        </svg>\r\n      )}\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default EmojiPickerButton;\r\n","import $dvPge$react, {useRef as $dvPge$useRef, useEffect as $dvPge$useEffect} from \"react\";\nimport {Picker as $dvPge$Picker} from \"emoji-mart\";\n\n\n\nfunction $e5534fc185f7111e$export$2e2bcd8739ae039(props) {\n    const ref = (0, $dvPge$useRef)(null);\n    const instance = (0, $dvPge$useRef)(null);\n    if (instance.current) instance.current.update(props);\n    (0, $dvPge$useEffect)(()=>{\n        instance.current = new (0, $dvPge$Picker)({\n            ...props,\n            ref: ref\n        });\n        return ()=>{\n            instance.current = null;\n        };\n    }, []);\n    return /*#__PURE__*/ (0, $dvPge$react).createElement(\"div\", {\n        ref: ref\n    });\n}\n\n\nexport {$e5534fc185f7111e$export$2e2bcd8739ae039 as default};\n//# sourceMappingURL=module.js.map\n","// vendors\r\nimport React, { memo, useEffect, useMemo, useState } from \"react\";\r\nimport Picker from \"@emoji-mart/react\";\r\n\r\nconst EMOJI_MART_DATA_URL = \"https://cdn.jsdelivr.net/npm/@emoji-mart/data\";\r\nconst cacheI18n = {};\r\n\r\n/**\r\n * @typedef {object} Props\r\n * @property {'light' | 'dark' | 'auto'} theme\r\n * @property {'native' | 'apple' | 'facebook' | 'google' | 'twitter'} set\r\n * @property {function(import(\"../types/types\").EmojiMartItem): void} onSelectEmoji\r\n * @property {boolean} disableRecent\r\n * @property {any[]=} customEmojis\r\n * @property {import('../types/types').Languages=} language\r\n */\r\n\r\n/**\r\n * Emoji Picker Component\r\n * @param {Props} props\r\n */\r\nfunction EmojiPicker(props) {\r\n  const { theme, set, onSelectEmoji, disableRecent, customEmojis, language } = props;\r\n\r\n  /** @type {string[]} */\r\n  const categories = useMemo(() => {\r\n    /** @type {string[]} */\r\n    let categoryies = [];\r\n\r\n    if (!disableRecent) {\r\n      categoryies.push(\"frequent\");\r\n    }\r\n\r\n    categoryies = [\r\n      ...categoryies,\r\n      \"people\",\r\n      \"nature\",\r\n      \"foods\",\r\n      \"activity\",\r\n      \"places\",\r\n      \"objects\",\r\n      \"symbols\",\r\n      \"flags\"\r\n    ];\r\n\r\n    return categoryies;\r\n  }, [disableRecent]);\r\n\r\n  const [i18n, setI18n] = useState(undefined);\r\n\r\n  useEffect(() => {\r\n    if (!language) {\r\n      if (cacheI18n.en) {\r\n        setI18n(cacheI18n.en);\r\n        return;\r\n      }\r\n\r\n      // @ts-ignore\r\n      fetch(`${EMOJI_MART_DATA_URL}/i18n/en.json`)\r\n      .then(async data => {\r\n        const translations = await data.json();\r\n        setI18n(translations);\r\n        cacheI18n.en = translations;\r\n      })\r\n      .catch(error => {\r\n        console.error(\"Failed to load translations:\", error);\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (cacheI18n[language]) {\r\n      setI18n(cacheI18n[language]);\r\n      return;\r\n    }\r\n\r\n    // @ts-ignore\r\n    fetch(`${EMOJI_MART_DATA_URL}/i18n/${language}.json`)\r\n      .then(async data => {\r\n        const translations = await data.json();\r\n        setI18n(translations);\r\n        cacheI18n[language] = translations;\r\n      })\r\n      .catch(error => {\r\n        console.error(\"Failed to load translations:\", error);\r\n      });\r\n  }, [language]);\r\n\r\n  if (!i18n) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Picker\r\n      data={undefined}\r\n      theme={theme}\r\n      previewPosition=\"none\"\r\n      onEmojiSelect={onSelectEmoji}\r\n      custom={customEmojis}\r\n      categories={categories}\r\n      set={set}\r\n      i18n={i18n}\r\n    />\r\n  );\r\n}\r\n\r\n\r\nexport default memo(EmojiPicker);\r\n","import React from \"react\";\r\nimport EmojiPicker from \"./emoji-picker\";\r\n\r\n/**\r\n * @typedef {object} Props\r\n * @property {boolean} showPicker\r\n * @property {'light' | 'dark' | 'auto'} theme\r\n * @property {'native' | 'apple' | 'facebook' | 'google' | 'twitter'} set\r\n * @property {(emoji: import(\"../types/types\").EmojiMartItem) => void} handleSelectEmoji\r\n * @property {boolean} disableRecent\r\n * @property {any[]=} customEmojis\r\n * @property {('above' | 'below')=} position\r\n * @property {import('../types/types').Languages=} language\r\n */\r\n\r\n/**\r\n * Emoji Picker Button Component\r\n * @param {Props} props\r\n * @return {JSX.Element}\r\n */\r\nfunction EmojiPickerContainer({\r\n  showPicker,\r\n  theme,\r\n  set,\r\n  handleSelectEmoji,\r\n  disableRecent,\r\n  customEmojis,\r\n  position,\r\n  language\r\n}) {\r\n  return (\r\n    <div className=\"react-emoji-picker--container\">\r\n      {showPicker && (\r\n        <div\r\n          className=\"react-emoji-picker--wrapper\"\r\n          onClick={evt => evt.stopPropagation()}\r\n          style={position === 'below' ? {top: '40px'} : {}}\r\n        >\r\n          <div className=\"react-emoji-picker\">\r\n            <EmojiPicker\r\n              theme={theme}\r\n              onSelectEmoji={handleSelectEmoji}\r\n              disableRecent={disableRecent}\r\n              customEmojis={customEmojis}\r\n              language={language}\r\n              set={set}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EmojiPickerContainer;\r\n","// @ts-check\r\n// vendors\r\nimport React, { useEffect, useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport {\r\n  getImageEmoji,\r\n  replaceAllTextEmojis,\r\n  replaceAllTextEmojiToString\r\n} from \"../utils/emoji-utils\";\r\n\r\nimport EmojiPickerButton from \"./emoji-picker-button\";\r\nimport EmojiPickerContainer from \"./emoji-picker-container\";\r\n\r\nconst EMOJI_PICKER_CONTAINER_HEIGHT = 435;\r\n\r\n/**\r\n * @typedef {import('../types/types').SanitizeFn} SanitizeFn\r\n */\r\n\r\n/**\r\n * @typedef {import('../types/types').PolluteFn} PolluteFn\r\n */\r\n\r\n/**\r\n * @typedef {Object} Props\r\n * @property {'light' | 'dark' | 'auto'} theme\r\n * @property {'native' | 'apple' | 'facebook' | 'google' | 'twitter'} set\r\n * @property {boolean} keepOpened\r\n * @property {boolean} disableRecent\r\n * @property {any[]=} customEmojis\r\n * @property {(fn: SanitizeFn) => void} addSanitizeFn\r\n * @property {(fn: PolluteFn) => void} addPolluteFn\r\n * @property {(html: string) => void} appendContent\r\n * @property {HTMLDivElement=} buttonElement\r\n * @property {React.MutableRefObject=} buttonRef\r\n * @property {import('../types/types').Languages=} language\r\n */\r\n\r\n// eslint-disable-next-line valid-jsdoc\r\n/** @type {React.FC<Props>} */\r\nconst EmojiPickerWrapper = props => {\r\n  const {\r\n    theme,\r\n    set,\r\n    keepOpened,\r\n    disableRecent,\r\n    customEmojis,\r\n    addSanitizeFn,\r\n    addPolluteFn,\r\n    appendContent,\r\n    buttonElement,\r\n    buttonRef,\r\n    language\r\n  } = props;\r\n\r\n  const [showPicker, setShowPicker] = useState(false);\r\n  /** @type {[HTMLDivElement | undefined, React.Dispatch<React.SetStateAction<HTMLDivElement | undefined>>]} */\r\n  const [customButton, setCustomButton] = useState();\r\n  /** @type {['above' | 'below' | undefined, React.Dispatch<React.SetStateAction<'above' | 'below' | undefined>>]} */\r\n  const [emojiPickerPosition, setEmojiPickerPosition] = useState()\r\n\r\n  useEffect(() => {\r\n    addSanitizeFn(replaceAllTextEmojiToString);\r\n  }, [addSanitizeFn]);\r\n\r\n  useEffect(() => {\r\n    addPolluteFn(replaceAllTextEmojis);\r\n  }, [addPolluteFn]);\r\n\r\n  useEffect(() => {\r\n    /**\r\n     *\r\n     * @param {MouseEvent} event\r\n     */\r\n    function checkClickOutside(event) {\r\n      /** @type {HTMLElement} */\r\n      // @ts-ignore\r\n      const element = event.target;\r\n\r\n      if (\r\n        element.classList.contains(\"react-input-emoji--button\") ||\r\n        element.classList.contains(\"react-input-emoji--button--icon\")\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      setShowPicker(false);\r\n    }\r\n\r\n    document.addEventListener(\"click\", checkClickOutside);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"click\", checkClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  /**\r\n   *\r\n   * @param {React.MouseEvent} event\r\n   */\r\n  function toggleShowPicker(event) {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n\r\n    setEmojiPickerPosition(calcTopPosition(event))\r\n\r\n    setShowPicker(currentShowPicker => !currentShowPicker);\r\n  }\r\n\r\n  /**\r\n   * @param {React.MouseEvent} event\r\n   * @return {'above' | 'below'}\r\n   */\r\n  function calcTopPosition(event) {\r\n    const btn = event.currentTarget\r\n    const btnRect = btn.getBoundingClientRect();\r\n\r\n    const popoverHeight = EMOJI_PICKER_CONTAINER_HEIGHT;\r\n\r\n    // Decide to display above or below based on available space\r\n    if (btnRect.top >= popoverHeight) {\r\n        // Display above\r\n        return 'above'\r\n    } else {\r\n        // Display below\r\n        return 'below'\r\n    }\r\n  }\r\n\r\n  // eslint-disable-next-line valid-jsdoc\r\n  /**\r\n   *\r\n   * @param {import(\"../types/types\").EmojiMartItem} emoji\r\n   */\r\n  function handleSelectEmoji(emoji) {\r\n    appendContent(getImageEmoji(emoji));\r\n\r\n    if (!keepOpened) {\r\n      setShowPicker(currentShowPicker => !currentShowPicker);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (buttonRef?.current?.style) {\r\n      buttonRef.current.style.position = \"relative\";\r\n      setCustomButton(buttonRef.current);\r\n    }  else if (buttonElement?.style) {\r\n      buttonElement.style.position = \"relative\";\r\n      setCustomButton(buttonElement);\r\n    }\r\n  }, [buttonRef, buttonElement]);\r\n\r\n  return (\r\n    <>\r\n      <EmojiPickerContainer\r\n        set={set}\r\n        showPicker={showPicker}\r\n        theme={theme}\r\n        handleSelectEmoji={handleSelectEmoji}\r\n        disableRecent={disableRecent}\r\n        customEmojis={customEmojis}\r\n        position={emojiPickerPosition}\r\n        language={language}\r\n      />\r\n      <EmojiPickerButton\r\n        showPicker={showPicker}\r\n        toggleShowPicker={toggleShowPicker}\r\n        buttonElement={customButton}\r\n        buttonRef={buttonRef}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EmojiPickerWrapper;\r\n","// @ts-check\r\n\r\n/**\r\n *\r\n * @return {string | null}\r\n */\r\nexport function getTextFromAtToCaret() {\r\n  const range = getRangeFromAtToCaret();\r\n\r\n  if (!range) return null;\r\n\r\n  const text = range.text.substring(range.begin, range.end);\r\n\r\n  return text || null;\r\n}\r\n\r\n// eslint-disable-next-line valid-jsdoc\r\n/** */\r\nexport function deleteTextFromAtToCaret() {\r\n  const range = getRangeFromAtToCaret();\r\n\r\n  if (!range) return;\r\n\r\n  // @ts-ignore\r\n  range.element.deleteData(range.begin, range.end - range.begin);\r\n}\r\n\r\n/**\r\n *\r\n * @return {{begin: number, end: number, text: string, element: Node} | null}\r\n */\r\nfunction getRangeFromAtToCaret() {\r\n  const elementWithFocus = getElementWithFocus();\r\n\r\n  if (!elementWithFocus) {\r\n    return null;\r\n  }\r\n\r\n  const { element, caretOffset } = elementWithFocus;\r\n  const text = element.textContent;\r\n  const lastAt = text.lastIndexOf(\"@\");\r\n\r\n  if (\r\n    lastAt === -1 ||\r\n    lastAt >= caretOffset ||\r\n    (lastAt !== 0 && text[lastAt - 1] !== \" \")\r\n  ) {\r\n    return null;\r\n  }\r\n\r\n  return { begin: lastAt, end: caretOffset, text, element };\r\n}\r\n\r\n/**\r\n *\r\n * @return {{element: Node, caretOffset: number}}\r\n */\r\nexport function getElementWithFocus() {\r\n  const element = getSelectionStart();\r\n\r\n  if (element === null) {\r\n    return null;\r\n  }\r\n\r\n  let caretOffset = 0;\r\n  if (typeof window.getSelection != \"undefined\") {\r\n    const range = window.getSelection().getRangeAt(0);\r\n    const preCaretRange = range.cloneRange();\r\n    preCaretRange.selectNodeContents(element);\r\n    preCaretRange.setEnd(range.endContainer, range.endOffset);\r\n    caretOffset = preCaretRange.toString().length;\r\n  } else if (\r\n    // @ts-ignore\r\n    typeof document.selection != \"undefined\" &&\r\n    // @ts-ignore\r\n    document.selection.type != \"Control\"\r\n  ) {\r\n    // @ts-ignore\r\n    const textRange = document.selection.createRange();\r\n    // @ts-ignore\r\n    const preCaretTextRange = document.body.createTextRange();\r\n    preCaretTextRange.moveToElementText(element);\r\n    preCaretTextRange.setEndPoint(\"EndToEnd\", textRange);\r\n    caretOffset = preCaretTextRange.text.length;\r\n  }\r\n\r\n  return { element, caretOffset };\r\n}\r\n\r\n/**\r\n *\r\n * @return {Node | null}\r\n */\r\nfunction getSelectionStart() {\r\n  const node = document.getSelection().anchorNode;\r\n  return node?.nodeType == 3 ? node : null;\r\n}\r\n","// @ts-check\r\nimport { useCallback, useState } from \"react\";\r\nimport {\r\n  deleteTextFromAtToCaret,\r\n  getElementWithFocus,\r\n  getTextFromAtToCaret\r\n} from \"../utils/mention-utils\";\r\n\r\n/**\r\n * @typedef {import('../types/types').MentionUser} MentionUser\r\n */\r\n\r\n// eslint-disable-next-line valid-jsdoc\r\n/**\r\n *\r\n * @param {(text: string) => Promise<MentionUser[]>=} searchMention\r\n * @returns {{mentionSearchText: string | null, mentionUsers: MentionUser[], onKeyUp: (event: React.KeyboardEvent) => void, onFocus: () => void, onSelectUser: () => void, loading: boolean}}\r\n */\r\nexport function useMention(searchMention) {\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  /** @type {[MentionUser[], React.Dispatch<React.SetStateAction<MentionUser[]>>]} */\r\n  const [mentionUsers, setMentionUsers] = useState([]);\r\n\r\n  /** @type {[string | null, React.Dispatch<React.SetStateAction<string | null>>]} */\r\n  const [mentionSearchText, setMentionSearchText] = useState(null);\r\n\r\n  const onSelectUser = useCallback(() => {\r\n    deleteTextFromAtToCaret();\r\n    setMentionUsers([]);\r\n  }, []);\r\n\r\n  /** */\r\n  const checkMentionText = useCallback(async () => {\r\n    const metionText = getTextFromAtToCaret();\r\n\r\n    setMentionSearchText(metionText);\r\n\r\n    if (metionText === null) {\r\n      setMentionUsers([]);\r\n    } else {\r\n      setLoading(true);\r\n      const users = await searchMention(metionText);\r\n      setLoading(false);\r\n      setMentionUsers(users);\r\n    }\r\n  }, [searchMention]);\r\n\r\n  /** @type {(event: React.KeyboardEvent) => void} */\r\n  const onKeyUp = useCallback(\r\n    async event => {\r\n      if (typeof searchMention !== \"function\") return;\r\n\r\n      if (\r\n        event.key === \"Backspace\" &&\r\n        getElementWithFocus()?.element.parentElement.hasAttribute(\r\n          \"data-mention-id\"\r\n        )\r\n      ) {\r\n        const elementWithFocus = getElementWithFocus();\r\n        elementWithFocus.element.parentElement.remove();\r\n      } else if (\r\n        ![\"ArrowUp\", \"ArrowDown\", \"Esc\", \"Escape\"].includes(event.key)\r\n      ) {\r\n        checkMentionText();\r\n      }\r\n    },\r\n    [checkMentionText, searchMention]\r\n  );\r\n\r\n  const onFocus = useCallback(() => {\r\n    checkMentionText();\r\n  }, [checkMentionText]);\r\n\r\n  return {\r\n    mentionSearchText,\r\n    mentionUsers,\r\n    onKeyUp,\r\n    onFocus,\r\n    onSelectUser,\r\n    loading\r\n  };\r\n}\r\n","// @ts-check\r\n// vendors\r\nimport React, {\r\n  useImperativeHandle,\r\n  useState,\r\n  forwardRef,\r\n  useMemo,\r\n  useEffect\r\n} from \"react\";\r\n\r\n/**\r\n * @typedef {import('../types/types').MentionUser} MentionUser\r\n */\r\n\r\n/**\r\n * @typedef {import('../types/types').TextInputListeners} TextInputListeners\r\n */\r\n\r\n/**\r\n * @typedef {Object} Props\r\n * @property {MentionUser[]} users\r\n * @property {string | null} mentionSearchText\r\n * @property {(user: MentionUser) => void} onSelect\r\n * @property {(event: keyof TextInputListeners, fn: import('../types/types').Listerner<any>) => () => void} addEventListener\r\n */\r\n\r\n/**\r\n * @typedef {{prevUser: () => void; nextUser: () => void;}} Ref\r\n */\r\n\r\n// eslint-disable-next-line valid-jsdoc\r\n/** @type {React.ForwardRefRenderFunction<Ref, Props>} */\r\nconst MentionUserList = (\r\n  { users, mentionSearchText, onSelect, addEventListener },\r\n  ref\r\n) => {\r\n  const [selectedUser, setSelectedUser] = useState(0);\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    prevUser: () => {\r\n      setSelectedUser(currentSelectedUser => {\r\n        if (currentSelectedUser === 0) {\r\n          return 0;\r\n        }\r\n\r\n        return currentSelectedUser - 1;\r\n      });\r\n    },\r\n    nextUser: () => {\r\n      setSelectedUser(currentSelectedUser => {\r\n        if (currentSelectedUser === users.length - 1) {\r\n          return users.length - 1;\r\n        }\r\n\r\n        return currentSelectedUser + 1;\r\n      });\r\n    }\r\n  }));\r\n\r\n  useEffect(() => {\r\n    setSelectedUser(0);\r\n  }, [users]);\r\n\r\n  /**\r\n   *\r\n   * @param {string} selectedText\r\n   * @param {string} rest\r\n   * @return {string}\r\n   */\r\n  function getMentionSelectedNameEl(selectedText, rest) {\r\n    return `<span class=\"react-input-emoji--mention--item--name__selected\" data-testid=\"metion-selected-word\">${selectedText}</span>${rest}`;\r\n  }\r\n\r\n  /** @type {(MentionUser & {nameHtml: string})[]} */\r\n  const usersFiltered = useMemo(() => {\r\n    const searchText = mentionSearchText\r\n      ? mentionSearchText.substring(1).toLocaleLowerCase()\r\n      : \"\";\r\n    return users.map(user => {\r\n      let nameHtml = user.name;\r\n\r\n      if (mentionSearchText && mentionSearchText.length > 1) {\r\n        if (user.name.toLowerCase().startsWith(searchText)) {\r\n          nameHtml = getMentionSelectedNameEl(\r\n            user.name.substring(0, searchText.length),\r\n            user.name.substring(searchText.length)\r\n          );\r\n        } else {\r\n          const names = user.name.split(\" \");\r\n\r\n          nameHtml = names\r\n            .map(name => {\r\n              if (name.toLocaleLowerCase().startsWith(searchText)) {\r\n                return getMentionSelectedNameEl(\r\n                  name.substring(0, searchText.length),\r\n                  name.substring(searchText.length)\r\n                );\r\n              }\r\n              return name;\r\n            })\r\n            .join(\" \");\r\n        }\r\n      }\r\n\r\n      return {\r\n        ...user,\r\n        nameHtml\r\n      };\r\n    });\r\n  }, [mentionSearchText, users]);\r\n\r\n  // eslint-disable-next-line valid-jsdoc\r\n  /**\r\n   *\r\n   * @param {MentionUser} user\r\n   * @returns {(event: React.MouseEvent) => void} event\r\n   */\r\n  function handleClick(user) {\r\n    return event => {\r\n      event.stopPropagation();\r\n      event.preventDefault();\r\n\r\n      onSelect(user);\r\n    };\r\n  }\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = addEventListener(\"enter\", event => {\r\n      event.stopPropagation();\r\n      event.preventDefault();\r\n      onSelect(usersFiltered[selectedUser]);\r\n    });\r\n\r\n    return () => {\r\n      unsubscribe();\r\n    };\r\n  }, [addEventListener, onSelect, selectedUser, usersFiltered]);\r\n\r\n  return (\r\n    <ul\r\n      className=\"react-input-emoji--mention--list\"\r\n      data-testid=\"mention-user-list\"\r\n    >\r\n      {usersFiltered.map((user, index) => (\r\n        <li key={user.id}>\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleClick(user)}\r\n            className={`react-input-emoji--mention--item${\r\n              selectedUser === index\r\n                ? \" react-input-emoji--mention--item__selected\"\r\n                : \"\"\r\n            }`}\r\n            onMouseOver={() => setSelectedUser(index)}\r\n          >\r\n            <img\r\n              className=\"react-input-emoji--mention--item--img\"\r\n              src={user.image}\r\n            />\r\n            <div\r\n              className=\"react-input-emoji--mention--item--name\"\r\n              dangerouslySetInnerHTML={{ __html: user.nameHtml }}\r\n            />\r\n          </button>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nconst MentionUserListWithRef = forwardRef(MentionUserList);\r\n\r\nexport default MentionUserListWithRef;\r\n","// @ts-check\r\n// vendors\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\n\r\n// hooks\r\nimport { useMention } from \"../hooks/use-mention\";\r\n\r\n// components\r\nimport MentionUserList from \"./mention-user-list\";\r\n\r\n/**\r\n * @typedef {import('../types/types').MentionUser} MetionUser\r\n */\r\n\r\n/**\r\n * @typedef {import('../types/types').TextInputListeners} TextInputListeners\r\n */\r\n\r\n/**\r\n * @typedef {import('../types/types').SanitizeFn} SanitizeFn\r\n */\r\n\r\n/**\r\n * @typedef {Object} Props\r\n * @property {(text: string) => Promise<MetionUser[]>=} searchMention\r\n * @property {(event: keyof TextInputListeners, fn: import('../types/types').Listerner<any>) => () => void} addEventListener\r\n * @property {(html: string) => void} appendContent\r\n * @property {(fn: SanitizeFn) => void} addSanitizeFn\r\n */\r\n\r\n// eslint-disable-next-line valid-jsdoc\r\n/** @type {React.FC<Props>} */\r\nconst MentionWrapper = ({\r\n  searchMention,\r\n  addEventListener,\r\n  appendContent,\r\n  addSanitizeFn\r\n}) => {\r\n  /** @type {React.MutableRefObject<import('./mention-user-list').Ref | null>} */\r\n  const metionUserListRef = useRef(null);\r\n  const [showUserList, setShowUserList] = useState(false);\r\n\r\n  const {\r\n    mentionSearchText,\r\n    mentionUsers,\r\n    loading,\r\n    onKeyUp,\r\n    onFocus,\r\n    onSelectUser\r\n  } = useMention(searchMention);\r\n\r\n  useEffect(() => {\r\n    addSanitizeFn(html => {\r\n      const container = document.createElement(\"div\");\r\n      container.innerHTML = html;\r\n\r\n      const mentionsEl = Array.prototype.slice.call(\r\n        container.querySelectorAll(\".react-input-emoji--mention--text\")\r\n      );\r\n\r\n      mentionsEl.forEach(mentionEl => {\r\n        container.innerHTML = container.innerHTML.replace(\r\n          mentionEl.outerHTML,\r\n          `@[${mentionEl.dataset.mentionName}](userId:${mentionEl.dataset.mentionId})`\r\n        );\r\n      });\r\n\r\n      return container.innerHTML;\r\n    });\r\n  }, [addSanitizeFn]);\r\n\r\n  useEffect(() => {\r\n    setShowUserList(mentionUsers.length > 0);\r\n  }, [mentionUsers]);\r\n\r\n  useEffect(() => {\r\n    /** */\r\n    function checkClickOutside() {\r\n      setShowUserList(false);\r\n    }\r\n\r\n    document.addEventListener(\"click\", checkClickOutside);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"click\", checkClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = addEventListener(\"keyUp\", onKeyUp);\r\n\r\n    return () => {\r\n      unsubscribe();\r\n    };\r\n  }, [addEventListener, onKeyUp]);\r\n\r\n  useEffect(() => {\r\n    /**\r\n     *\r\n     * @param {React.KeyboardEvent} event\r\n     */\r\n    function handleKeyDown(event) {\r\n      switch (event.key) {\r\n        case \"Esc\": // IE/Edge specific value\r\n        case \"Escape\":\r\n          setShowUserList(false);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n\r\n    const unsubscribe = addEventListener(\"keyDown\", handleKeyDown);\r\n\r\n    return () => {\r\n      unsubscribe();\r\n    };\r\n  }, [addEventListener]);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = addEventListener(\"focus\", onFocus);\r\n\r\n    return () => {\r\n      unsubscribe();\r\n    };\r\n  }, [addEventListener, onFocus]);\r\n\r\n  useEffect(() => {\r\n    if (showUserList) {\r\n      const unsubscribeArrowUp = addEventListener(\"arrowUp\", event => {\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n        metionUserListRef.current.prevUser();\r\n      });\r\n\r\n      const unsubscribeArrowDown = addEventListener(\"arrowDown\", event => {\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n        metionUserListRef.current.nextUser();\r\n      });\r\n\r\n      return () => {\r\n        unsubscribeArrowUp();\r\n        unsubscribeArrowDown();\r\n      };\r\n    }\r\n  }, [addEventListener, showUserList]);\r\n\r\n  /**\r\n   *\r\n   * @param {MetionUser} user\r\n   */\r\n  function handleSelect(user) {\r\n    onSelectUser();\r\n    appendContent(\r\n      `<span class=\"react-input-emoji--mention--text\" data-mention-id=\"${user.id}\" data-mention-name=\"${user.name}\">@${user.name}</span> `\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {loading ? (\r\n        <div className=\"react-input-emoji--mention--container\">\r\n          <div className=\"react-input-emoji--mention--loading\">\r\n            <div className=\"react-input-emoji--mention--loading--spinner\">\r\n              Loading...\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        showUserList && (\r\n          <div\r\n            className=\"react-input-emoji--mention--container\"\r\n            onClick={evt => evt.stopPropagation()}\r\n          >\r\n            <MentionUserList\r\n              ref={metionUserListRef}\r\n              mentionSearchText={mentionSearchText}\r\n              users={mentionUsers}\r\n              onSelect={handleSelect}\r\n              addEventListener={addEventListener}\r\n            />\r\n          </div>\r\n        )\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MentionWrapper;\r\n","// @ts-check\r\n\r\n// eslint-disable-next-line valid-jsdoc\r\n/**\r\n * @template T\r\n * @returns {import('../types/types').ListenerObj<T>}\r\n */\r\nexport function createObserver() {\r\n  /** @type {import('../types/types').Listerner<T>[]} */\r\n  let listeners = [];\r\n\r\n  return {\r\n    subscribe: listener => {\r\n      listeners.push(listener);\r\n      return () => {\r\n        listeners = listeners.filter(l => l !== listener);\r\n      };\r\n    },\r\n    publish: event => {\r\n      listeners.forEach(listener => listener(event));\r\n    },\r\n    get currentListerners() {\r\n      return listeners;\r\n    }\r\n  };\r\n}\r\n","// @ts-check\r\n\r\nimport { useCallback, useMemo } from \"react\";\r\nimport { createObserver } from \"../utils/observer\";\r\n\r\n/**\r\n * @typedef {import('../types/types').TextInputListeners} TextInputListeners\r\n */\r\n\r\n// eslint-disable-next-line valid-jsdoc\r\n/** */\r\nexport function useEventListeners() {\r\n  /** @type {TextInputListeners} */\r\n  const listeners = useMemo(\r\n    () => ({\r\n      keyDown: createObserver(),\r\n      keyUp: createObserver(),\r\n      arrowUp: createObserver(),\r\n      arrowDown: createObserver(),\r\n      enter: createObserver(),\r\n      focus: createObserver(),\r\n      blur: createObserver()\r\n    }),\r\n    []\r\n  );\r\n\r\n  /**\r\n   * @template {keyof TextInputListeners} T, K\r\n   * @type {(event: keyof TextInputListeners, fn: import('../types/types').Listerner<any>) => () => void}\r\n   */\r\n  const addEventListener = useCallback(\r\n    (event, fn) => {\r\n      return listeners[event].subscribe(fn);\r\n    },\r\n    [listeners]\r\n  );\r\n\r\n  return { addEventListener, listeners };\r\n}\r\n","// @ts-check\r\n\r\nimport { useCallback, useRef } from \"react\";\r\n\r\n/**\r\n * @typedef {import('../types/types').PolluteFn} PolluteFn\r\n */\r\n\r\n// eslint-disable-next-line valid-jsdoc\r\n/** */\r\nexport function usePollute() {\r\n  /** @type {React.MutableRefObject<PolluteFn[]>} */\r\n  const polluteFnsRef = useRef([]);\r\n\r\n  /** @type {(fn: PolluteFn) => void} */\r\n  const addPolluteFn = useCallback(fn => {\r\n    polluteFnsRef.current.push(fn);\r\n  }, []);\r\n\r\n  /** @type {(html: string) => string} */\r\n  const pollute = useCallback(text => {\r\n    const result = polluteFnsRef.current.reduce((acc, fn) => {\r\n      return fn(acc);\r\n    }, text);\r\n\r\n    return result;\r\n  }, []);\r\n\r\n  return { addPolluteFn, pollute };\r\n}\r\n","// @ts-check\r\n// vendors\r\nimport React, { useEffect, useRef, forwardRef, useCallback } from \"react\";\r\n\r\n// css\r\nimport \"./styles.css\";\r\n\r\n// utils\r\nimport { replaceAllTextEmojis } from \"./utils/emoji-utils\";\r\nimport { handleCopy, totalCharacters } from \"./utils/input-event-utils\";\r\n\r\n// hooks\r\nimport { useExpose } from \"./hooks/use-expose\";\r\nimport { useEmit } from \"./hooks/use-emit\";\r\n\r\n// components\r\nimport TextInput from \"./text-input\";\r\nimport EmojiPickerWrapper from \"./components/emoji-picker-wrapper\";\r\nimport MentionWrapper from \"./components/mention-wrapper\";\r\nimport { useEventListeners } from \"./hooks/use-event-listeners\";\r\nimport { useSanitize } from \"./hooks/use-sanitize\";\r\nimport { usePollute } from \"./hooks/user-pollute\";\r\n\r\n/**\r\n * @typedef {import('./types/types').MentionUser} MetionUser\r\n */\r\n\r\n/**\r\n * @typedef {import('./types/types').ListenerObj<any>} ListenerObj\r\n */\r\n\r\n/**\r\n * @typedef {object} Props\r\n * @property {string} value\r\n * @property {(value: string) => void} onChange\r\n * @property {\"light\" | \"dark\" | \"auto\"=} theme\r\n * @property {'native' | 'apple' | 'facebook' | 'google' | 'twitter'=} set\r\n * @property {boolean=} cleanOnEnter\r\n * @property {(text: string) => void=} onEnter\r\n * @property {string=} placeholder\r\n * @property {string=} placeholderColor\r\n * @property {string=} color\r\n * @property {(size: {width: number, height: number}) => void=} onResize\r\n * @property {() => void=} onClick\r\n * @property {() => void=} onFocus\r\n * @property {() => void=} onBlur\r\n * @property {boolean} shouldReturn\r\n * @property {number=} maxLength\r\n * @property {boolean=} keepOpened\r\n * @property {(event: KeyboardEvent) => void=} onKeyDown\r\n * @property {string=} inputClass\r\n * @property {boolean=} disableRecent\r\n * @property {number=} tabIndex\r\n * @property {number=} height\r\n * @property {number=} borderRadius\r\n * @property {string=} borderColor\r\n * @property {number=} fontSize\r\n * @property {string=} fontFamily\r\n * @property {string=} background\r\n * @property {{id: string; name: string; emojis: {id: string; name: string; keywords: string[], skins: {src: string}[]}}[]=} customEmojis\r\n * @property {import('./types/types').Languages=} language\r\n * @property {(text: string) => Promise<MetionUser[]>=} searchMention\r\n * @property {HTMLDivElement=} buttonElement\r\n * @property {React.MutableRefObject=} buttonRef\r\n * @property {boolean} shouldConvertEmojiToImage\r\n */\r\n\r\n/**\r\n * Input Emoji Component\r\n * @param {Props} props\r\n * @param {React.Ref<any>} ref\r\n * @return {JSX.Element}\r\n */\r\nfunction InputEmoji(props, ref) {\r\n  const {\r\n    onChange,\r\n    onEnter,\r\n    onResize,\r\n    onClick,\r\n    onFocus,\r\n    onBlur,\r\n    onKeyDown,\r\n    theme,\r\n    set,\r\n    cleanOnEnter,\r\n    placeholder,\r\n    maxLength,\r\n    keepOpened,\r\n    inputClass,\r\n    disableRecent,\r\n    tabIndex,\r\n    value,\r\n    customEmojis,\r\n    language,\r\n    searchMention,\r\n    buttonElement,\r\n    buttonRef,\r\n    shouldReturn,\r\n    shouldConvertEmojiToImage,\r\n    // style\r\n    borderRadius,\r\n    borderColor,\r\n    fontSize,\r\n    fontFamily,\r\n    background,\r\n    placeholderColor,\r\n    color,\r\n  } = props;\r\n\r\n  /** @type {React.MutableRefObject<import('./text-input').Ref | null>} */\r\n  const textInputRef = useRef(null);\r\n\r\n  const { addEventListener, listeners } = useEventListeners();\r\n\r\n  const { addSanitizeFn, sanitize, sanitizedTextRef } = useSanitize(shouldReturn, shouldConvertEmojiToImage);\r\n\r\n  const { addPolluteFn, pollute } = usePollute();\r\n\r\n  const updateHTML = useCallback(\r\n    (nextValue = \"\") => {\r\n      if (textInputRef.current === null) return;\r\n\r\n      textInputRef.current.html = replaceAllTextEmojis(nextValue);\r\n      sanitizedTextRef.current = nextValue;\r\n    },\r\n    [sanitizedTextRef]\r\n  );\r\n\r\n  const setValue = useCallback(\r\n    /**\r\n     *\r\n     * @param {string} value\r\n     */\r\n    (value) => {\r\n      updateHTML(value);\r\n    },\r\n    [updateHTML]\r\n  );\r\n\r\n  const emitChange = useEmit(textInputRef, onResize, onChange);\r\n\r\n  useExpose({\r\n    ref,\r\n    setValue,\r\n    textInputRef,\r\n    emitChange,\r\n    shouldConvertEmojiToImage\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (sanitizedTextRef.current !== value) {\r\n      setValue(value);\r\n    }\r\n  }, [sanitizedTextRef, setValue, value]);\r\n\r\n  // useEffect(() => {\r\n  //   updateHTML();\r\n  // }, [updateHTML]);\r\n\r\n  useEffect(() => {\r\n    /**\r\n     * Handle keydown event\r\n     * @param {React.KeyboardEvent} event\r\n     * @return {boolean}\r\n     */\r\n    function handleKeydown(event) {\r\n      if (\r\n        typeof maxLength !== \"undefined\" &&\r\n        event.key !== \"Backspace\" &&\r\n        textInputRef.current !== null &&\r\n        totalCharacters(textInputRef.current) >= maxLength\r\n      ) {\r\n        event.preventDefault();\r\n      }\r\n\r\n      if (event.key === \"Enter\" && textInputRef.current) {\r\n        event.preventDefault();\r\n\r\n        const text = sanitize(textInputRef.current.html);\r\n\r\n        emitChange(sanitizedTextRef.current);\r\n\r\n        if (\r\n          typeof onEnter === \"function\" &&\r\n          listeners.enter.currentListerners.length === 0\r\n        ) {\r\n          onEnter(text);\r\n        }\r\n\r\n        if (cleanOnEnter && listeners.enter.currentListerners.length === 0) {\r\n          updateHTML(\"\");\r\n        }\r\n\r\n        if (typeof onKeyDown === \"function\") {\r\n          onKeyDown(event.nativeEvent);\r\n        }\r\n\r\n        return false;\r\n      }\r\n\r\n      if (typeof onKeyDown === \"function\") {\r\n        onKeyDown(event.nativeEvent);\r\n      }\r\n\r\n      return true;\r\n    }\r\n\r\n    const unsubscribe = addEventListener(\"keyDown\", handleKeydown);\r\n\r\n    return () => {\r\n      unsubscribe();\r\n    };\r\n  }, [\r\n    addEventListener,\r\n    cleanOnEnter,\r\n    emitChange,\r\n    listeners.enter.currentListerners.length,\r\n    maxLength,\r\n    onEnter,\r\n    onKeyDown,\r\n    sanitize,\r\n    sanitizedTextRef,\r\n    updateHTML\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    /** */\r\n    function handleFocus() {\r\n      if (typeof onClick === \"function\") {\r\n        onClick();\r\n      }\r\n\r\n      if (typeof onFocus === \"function\") {\r\n        onFocus();\r\n      }\r\n    }\r\n\r\n    const unsubscribe = addEventListener(\"focus\", handleFocus);\r\n\r\n    return () => {\r\n      unsubscribe();\r\n    };\r\n  }, [addEventListener, onClick, onFocus]);\r\n\r\n  useEffect(() => {\r\n    /** */\r\n    function handleBlur() {\r\n      if (typeof onBlur === \"function\") {\r\n        onBlur();\r\n      }\r\n    }\r\n\r\n    const unsubscribe = addEventListener(\"blur\", handleBlur);\r\n\r\n    return () => {\r\n      unsubscribe();\r\n    };\r\n  }, [addEventListener, onBlur]);\r\n\r\n  /**\r\n   *\r\n   * @param {string} html\r\n   */\r\n  function handleTextInputChange(html) {\r\n    sanitize(html);\r\n\r\n    if (value !== sanitizedTextRef.current) {\r\n      emitChange(sanitizedTextRef.current);\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {string} html\r\n   */\r\n  function appendContent(html) {\r\n    if (\r\n      typeof maxLength !== \"undefined\" &&\r\n      textInputRef.current !== null &&\r\n      totalCharacters(textInputRef.current) >= maxLength\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (textInputRef.current !== null) {\r\n      textInputRef.current.appendContent(html);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle past on input\r\n   * @param {React.ClipboardEvent} event\r\n   */\r\n  function handlePaste(event) {\r\n    event.preventDefault();\r\n    let content;\r\n    if (event.clipboardData) {\r\n      content = event.clipboardData.getData(\"text/plain\");\r\n      content = pollute(content);\r\n      document.execCommand(\"insertHTML\", false, content);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"react-emoji\">\r\n      <MentionWrapper\r\n        searchMention={searchMention}\r\n        addEventListener={addEventListener}\r\n        appendContent={appendContent}\r\n        addSanitizeFn={addSanitizeFn}\r\n      />\r\n      <TextInput\r\n        ref={textInputRef}\r\n        onCopy={handleCopy}\r\n        onPaste={handlePaste}\r\n        shouldReturn={shouldReturn}\r\n        onBlur={listeners.blur.publish}\r\n        onFocus={listeners.focus.publish}\r\n        onArrowUp={listeners.arrowUp.publish}\r\n        onArrowDown={listeners.arrowDown.publish}\r\n        onKeyUp={listeners.keyUp.publish}\r\n        onKeyDown={listeners.keyDown.publish}\r\n        onEnter={listeners.enter.publish}\r\n        placeholder={placeholder}\r\n        style={{\r\n          borderRadius,\r\n          borderColor,\r\n          fontSize,\r\n          fontFamily,\r\n          background,\r\n          placeholderColor,\r\n          color\r\n        }}\r\n        tabIndex={tabIndex}\r\n        className={inputClass}\r\n        onChange={handleTextInputChange}\r\n      />\r\n      <EmojiPickerWrapper\r\n        theme={theme}\r\n        set={set}\r\n        keepOpened={keepOpened}\r\n        disableRecent={disableRecent}\r\n        customEmojis={customEmojis}\r\n        addSanitizeFn={addSanitizeFn}\r\n        addPolluteFn={addPolluteFn}\r\n        appendContent={appendContent}\r\n        buttonElement={buttonElement}\r\n        buttonRef={buttonRef}\r\n        language={language}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst InputEmojiWithRef = forwardRef(InputEmoji);\r\n\r\nInputEmojiWithRef.defaultProps = {\r\n  theme: /** @type {'light' | 'dark' | 'auto'} */ (\"auto\"),\r\n  set: /** @type {'native' | 'apple' | 'facebook' | 'google' | 'twitter'} */ (\"apple\"),\r\n  height: 30,\r\n  placeholder: \"Type a message\",\r\n  borderRadius: 21,\r\n  borderColor: \"#EAEAEA\",\r\n  color: \"black\",\r\n  fontSize: 15,\r\n  fontFamily: \"sans-serif\",\r\n  background: \"white\",\r\n  tabIndex: 0,\r\n  shouldReturn: false,\r\n  shouldConvertEmojiToImage: false,\r\n  customEmojis: [],\r\n  language: undefined,\r\n};\r\n\r\nexport default InputEmojiWithRef;\r\n"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","TRANSPARENT_GIF","replaceAllTextEmojis","text","allEmojis","getAllEmojisFromText","_toConsumableArray","Set","forEach","emoji","replaceAll","getInputEmojiHTML","str","find","replace","RegExp","match","getImageEmoji","_emojiPickerEl$shadow","emojiPickerEl","querySelector","getInputEmojiNativeHTML","emojiSpanEl","shadowRoot","concat","name","replaceAllTextEmojiToString","html","container","innerHTML","images","Array","prototype","slice","call","querySelectorAll","image","outerHTML","dataset","handleCopy","event","selectedText","window","getSelection","i","len","rangeCount","getRangeAt","cloneContents","replaceEmojiToString","clipboardData","setData","innerText","preventDefault","handlePasteHtmlAtCaret","sel","range","deleteContents","el","frag","createDocumentFragment","node","lastNode","insertNode","cloneRange","setStartAfter","collapse","removeAllRanges","addRange","totalCharacters","_ref2","textCount","length","emojisCount","removeHtmlExceptBr","inputDiv","temp","tempContainer","stripped","final","getSelectionStart","startContainer","offset","startOffset","nodeType","Node","TEXT_NODE","nextSibling","commonAncestorContainer","getCursor","selection","selectionStart","addLineBreak","_getCursor","isCollapsed","textContent","br","setEndAfter","br2","setStart","setEnd","string","regexpOrSubstr","newValueOrFn","globalOffset","Error","fn","replaceUsingString","replaceUsingRegexp","patternString","index","indexOf","arr","endIndex","push","substring","regexp","output","replacerIsFn","storedLastIndex","lastIndex","result","exec","out","apply","input","global","module","stringReplaceToArray","stringOrArray","newSubStrOrFn","isArray","TypeError","arrayItem","re","toCodePoint","unicodeSurrogates","sep","r","c","p","charCodeAt","toString","join","UFE0Fg","U200D","String","fromCharCode","grabTheRightIcon","rawText","replaceEmoji","render","replaceStringToArray","emojiReplacer","_","icon","require","pageProtocol","location","protocol","emojiStyle","height","width","margin","verticalAlign","normalizeProtocol","charAt","makeTwemojiRenderer","options","merge","baseUrl","size","ext","props","renderTwemoji","src","key","alt","draggable","arguments","source","Object","hasOwnProperty","reactEasyEmoji","element","optionsOrFn","EMOJI_REGEX","useSanitize","shouldReturn","shouldConvertEmojiToImage","sanitizeFnsRef","useRef","sanitizedTextRef","addSanitizeFn","useCallback","current","sanitize","reduce","acc","replaceAllHtmlToString","convertEmojiToImage","handleEmoji","renderToString","useExpose","_ref","textInputRef","setValue","emitChange","_useSanitize","useImperativeHandle","value","focus","blur","useEmit","onResize","onChange","currentSizeRef","onChangeFn","checkAndEmitResize","currentSize","nextSize","sanitizedText","useEffect","TextInput","placeholder","tabIndex","className","_objectWithoutProperties","_excluded","appendContent","placeholderRef","visibility","offsetWidth","offsetHeight","placeholderStyle","useMemo","placeholderColor","color","inputStyle","handleKeyDown","shiftKey","ctrlKey","onEnter","onArrowUp","onArrowDown","onKeyDown","handleClick","onFocus","handleKeyUp","onKeyUp","React","onClick","contentEditable","onBlur","onCopy","onPaste","TextInputWithRef","forwardRef","EmojiPickerButton","showPicker","toggleShowPicker","buttonElement","buttonRef","_useState","useState","_useState2","_slicedToArray","typeButton","setTypeButton","localButtonRef","_buttonElement$childN","_buttonElement$childN2","addEventListener","removeEventListener","childNodes","xmlns","viewBox","d","$e5534fc185f7111e$export$2e2bcd8739ae039","$dvPge$useRef","instance","update","$dvPge$useEffect","$dvPge$Picker","$dvPge$react","EMOJI_MART_DATA_URL","cacheI18n","EmojiPicker","theme","set","onSelectEmoji","disableRecent","customEmojis","language","categories","categoryies","undefined","i18n","setI18n","en","fetch","then","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","translations","wrap","_callee$","_context","prev","next","json","sent","stop","_x","error","console","_callee2","_callee2$","_context2","_x2","Picker","previewPosition","onEmojiSelect","custom","memo","EmojiPickerContainer","handleSelectEmoji","position","evt","stopPropagation","top","EMOJI_PICKER_CONTAINER_HEIGHT","EmojiPickerWrapper","keepOpened","addPolluteFn","setShowPicker","_useState3","_useState4","customButton","setCustomButton","_useState5","_useState6","emojiPickerPosition","setEmojiPickerPosition","checkClickOutside","target","classList","contains","calcTopPosition","currentShowPicker","btn","currentTarget","btnRect","getBoundingClientRect","popoverHeight","_buttonRef$current","Fragment","getTextFromAtToCaret","getRangeFromAtToCaret","begin","end","deleteTextFromAtToCaret","deleteData","elementWithFocus","getElementWithFocus","caretOffset","lastAt","lastIndexOf","preCaretRange","selectNodeContents","endContainer","endOffset","textRange","createRange","preCaretTextRange","body","createTextRange","moveToElementText","setEndPoint","anchorNode","useMention","searchMention","loading","setLoading","mentionUsers","setMentionUsers","mentionSearchText","setMentionSearchText","onSelectUser","checkMentionText","metionText","users","_getElementWithFocus","abrupt","parentElement","hasAttribute","remove","includes","MentionUserList","onSelect","selectedUser","setSelectedUser","prevUser","currentSelectedUser","nextUser","getMentionSelectedNameEl","rest","usersFiltered","searchText","toLocaleLowerCase","map","user","nameHtml","toLowerCase","startsWith","names","split","_objectSpread","unsubscribe","id","onMouseOver","dangerouslySetInnerHTML","__html","MentionUserListWithRef","MentionWrapper","metionUserListRef","showUserList","setShowUserList","_useMention","mentionsEl","mentionEl","mentionName","mentionId","unsubscribeArrowUp","unsubscribeArrowDown","handleSelect","createObserver","listeners","subscribe","listener","filter","l","publish","currentListerners","useEventListeners","keyDown","keyUp","arrowUp","arrowDown","enter","usePollute","polluteFnsRef","pollute","InputEmoji","cleanOnEnter","maxLength","inputClass","borderRadius","borderColor","fontSize","fontFamily","background","_useEventListeners","_usePollute","updateHTML","nextValue","handleKeydown","nativeEvent","handleFocus","handleBlur","handleTextInputChange","handlePaste","content","getData","execCommand","InputEmojiWithRef","defaultProps"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}